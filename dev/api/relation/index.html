
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A simple PostgreSQL to Python mapper">
      
      
        <meta name="author" content="collorg">
      
      
        <link rel="canonical" href="https://collorg.github.io/halfORM/dev/api/relation/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Relation - halfORM Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#relation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="halfORM Documentation" class="md-header__button md-logo" aria-label="halfORM Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            halfORM Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Relation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/collorg/halfORM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    collorg/halfORM
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../quick-start/" class="md-tabs__link">
        
  
  
    
  
  Quick Start

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../fundamentals/" class="md-tabs__link">
        
  
  
    
  
  Fundamentals

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorial/" class="md-tabs__link">
          
  
  
  Tutorial

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ecosystem/" class="md-tabs__link">
          
  
  
  Ecosystem

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="halfORM Documentation" class="md-nav__button md-logo" aria-label="halfORM Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    halfORM Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/collorg/halfORM" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    collorg/halfORM
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fundamentals
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    halfORM Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/first-steps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    First Steps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/models-relations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Models and Relations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/foreign-keys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Foreign Keys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/transactions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transactions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/gitlab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database Exploration with GitLab
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/instant-rest-api/instant-rest-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instant REST API with halfORM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ecosystem
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Ecosystem
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ecosystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    halfORM Ecosystem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extensions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ecosystem/extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    halfORM Extensions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ecosystem/development/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extension Development Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ecosystem/development/development-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    halfORM Development Workflow Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ecosystem/development/documentation-workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    halfORM Documentation Workflow Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#method-categories" class="md-nav__link">
    <span class="md-ellipsis">
      Method Categories
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Method Categories">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query-builders-lazy" class="md-nav__link">
    <span class="md-ellipsis">
      Query Builders (Lazy)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-executors-eager" class="md-nav__link">
    <span class="md-ellipsis">
      Query Executors (Eager)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      Reference
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#half_orm.relation" class="md-nav__link">
    <span class="md-ellipsis">
      relation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="relation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half_orm.relation-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation" class="md-nav__link">
    <span class="md-ellipsis">
      DC_Relation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DC_Relation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_count" class="md-nav__link">
    <span class="md-ellipsis">
      ho_count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_delete" class="md-nav__link">
    <span class="md-ellipsis">
      ho_delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_distinct" class="md-nav__link">
    <span class="md-ellipsis">
      ho_distinct
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_get" class="md-nav__link">
    <span class="md-ellipsis">
      ho_get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_insert" class="md-nav__link">
    <span class="md-ellipsis">
      ho_insert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      ho_is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_is_set" class="md-nav__link">
    <span class="md-ellipsis">
      ho_is_set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_limit" class="md-nav__link">
    <span class="md-ellipsis">
      ho_limit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_offset" class="md-nav__link">
    <span class="md-ellipsis">
      ho_offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_order_by" class="md-nav__link">
    <span class="md-ellipsis">
      ho_order_by
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_select" class="md-nav__link">
    <span class="md-ellipsis">
      ho_select
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_unaccent" class="md-nav__link">
    <span class="md-ellipsis">
      ho_unaccent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.DC_Relation.ho_update" class="md-nav__link">
    <span class="md-ellipsis">
      ho_update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation" class="md-nav__link">
    <span class="md-ellipsis">
      Relation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Relation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Attributes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Attributes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_id" class="md-nav__link">
    <span class="md-ellipsis">
      ho_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_only" class="md-nav__link">
    <span class="md-ellipsis">
      ho_only
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__enter__" class="md-nav__link">
    <span class="md-ellipsis">
      __enter__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__exit__" class="md-nav__link">
    <span class="md-ellipsis">
      __exit__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__get_from" class="md-nav__link">
    <span class="md-ellipsis">
      __get_from
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__get_set_fields" class="md-nav__link">
    <span class="md-ellipsis">
      __get_set_fields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__prep_query" class="md-nav__link">
    <span class="md-ellipsis">
      __prep_query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__set__op__" class="md-nav__link">
    <span class="md-ellipsis">
      __set__op__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__setattr__" class="md-nav__link">
    <span class="md-ellipsis">
      __setattr__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__to_dict_val_comp" class="md-nav__link">
    <span class="md-ellipsis">
      __to_dict_val_comp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__update_args" class="md-nav__link">
    <span class="md-ellipsis">
      __update_args
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__walk_op" class="md-nav__link">
    <span class="md-ellipsis">
      __walk_op
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__what" class="md-nav__link">
    <span class="md-ellipsis">
      __what
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.__where_args" class="md-nav__link">
    <span class="md-ellipsis">
      __where_args
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_cast" class="md-nav__link">
    <span class="md-ellipsis">
      ho_cast
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_count" class="md-nav__link">
    <span class="md-ellipsis">
      ho_count
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_delete" class="md-nav__link">
    <span class="md-ellipsis">
      ho_delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_description" class="md-nav__link">
    <span class="md-ellipsis">
      ho_description
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_dict" class="md-nav__link">
    <span class="md-ellipsis">
      ho_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_distinct" class="md-nav__link">
    <span class="md-ellipsis">
      ho_distinct
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_freeze" class="md-nav__link">
    <span class="md-ellipsis">
      ho_freeze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_get" class="md-nav__link">
    <span class="md-ellipsis">
      ho_get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_insert" class="md-nav__link">
    <span class="md-ellipsis">
      ho_insert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_is_empty" class="md-nav__link">
    <span class="md-ellipsis">
      ho_is_empty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_is_set" class="md-nav__link">
    <span class="md-ellipsis">
      ho_is_set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_limit" class="md-nav__link">
    <span class="md-ellipsis">
      ho_limit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_mogrify" class="md-nav__link">
    <span class="md-ellipsis">
      ho_mogrify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_offset" class="md-nav__link">
    <span class="md-ellipsis">
      ho_offset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_order_by" class="md-nav__link">
    <span class="md-ellipsis">
      ho_order_by
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_select" class="md-nav__link">
    <span class="md-ellipsis">
      ho_select
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_unaccent" class="md-nav__link">
    <span class="md-ellipsis">
      ho_unaccent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_unfreeze" class="md-nav__link">
    <span class="md-ellipsis">
      ho_unfreeze
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.Relation.ho_update" class="md-nav__link">
    <span class="md-ellipsis">
      ho_update
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.singleton" class="md-nav__link">
    <span class="md-ellipsis">
      singleton
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#half_orm.relation.transaction" class="md-nav__link">
    <span class="md-ellipsis">
      transaction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="relation">Relation<a class="headerlink" href="#relation" title="Permanent link">&para;</a></h1>
<!-- TODO: Module overview -->
<!-- TODO: Key concepts -->
<!-- TODO: Usage patterns -->

<div class="admonition note">
<p class="admonition-title">API Status</p>
<p>API documentation is auto-generated from docstrings. Ensure docstrings are comprehensive.</p>
</div>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<h2 id="method-categories">Method Categories<a class="headerlink" href="#method-categories" title="Permanent link">&para;</a></h2>
<p>Relation methods are divided into two categories:</p>
<h3 id="query-builders-lazy">Query Builders (Lazy)<a class="headerlink" href="#query-builders-lazy" title="Permanent link">&para;</a></h3>
<p>Return modified relation objects without executing SQL:
- <code>ho_order_by()</code>, <code>ho_limit()</code>, <code>ho_offset()</code>
- Set operations: <code>&amp;</code>, <code>|</code>, <code>-</code>, <code>^</code>
- Foreign key navigation: <code>relation_fk()</code>, <code>relation_rfk()</code></p>
<h3 id="query-executors-eager">Query Executors (Eager)<a class="headerlink" href="#query-executors-eager" title="Permanent link">&para;</a></h3>
<p>Execute SQL immediately and return results:
- <code>ho_select(*fields)</code> → <strong>Generator</strong>
- <code>ho_count()</code> → <strong>int</strong>
- <code>ho_get()</code> → <strong>dict</strong>
- <code>ho_is_empty()</code> → <strong>bool</strong>
- <code>ho_insert()</code>, <code>ho_update()</code>, <code>ho_delete()</code> → <strong>dict</strong></p>
<div class="admonition warning">
<p class="admonition-title">No Chaining After Execution</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># ✅ Chain builders first</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">query</span> <span class="o">=</span> <span class="n">Author</span><span class="p">()</span><span class="o">.</span><span class="n">ho_order_by</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">ho_limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># ✅ Then execute</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">results</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">ho_select</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>  <span class="c1"># Returns generator</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># ❌ Cannot chain after execution</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="c1"># results.ho_order_by(&#39;email&#39;)  # ERROR!</span>
</code></pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Conceptual Background</p>
<p>This builder/executor pattern is core to halfORM's design. Learn more in <a href="../../fundamentals/#method-categories-builders-vs-executors">halfORM Fundamentals</a>.</p>
</div>
<h2 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="half_orm.relation" class="doc doc-heading">
            <code>relation</code>


<a href="#half_orm.relation" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>This module is used by the <code>model &lt;#module-half_orm.model&gt;</code>_ module
to generate the classes that manipulate the data in your database
with the <code>Model.get_relation_class &lt;#half_orm.model.Model.get_relation_class&gt;</code>_
method.</p>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from half_orm.model import Model
model = Model('halftest')
class Person(model.get_relation_class('actor.person')):
    # your code goes here</p>
</blockquote>
</blockquote>
</blockquote>
</details>        <p>Main methods provided by the class Relation:
- ho_insert: inserts a tuple into the pg table.
- ho_select: returns a generator of the elements of the set defined by
  the constraint on the Relation object. The elements are dictionaries with the
  keys corresponding to the selected columns names in the relation.
  The result is affected by the methods: ho_distinct, ho_order_by, ho_limit and ho_offset
  (see below).
- ho_update: updates the set defined by the constraint on the Relation object
  with the values passed as arguments.
- ho_delete: deletes from the relation the set of elements defined by the constraint
  on the Relation object.
- ho_get: returns the unique element defined by the constraint on the Relation object.
  the element returned if of the type of the Relation object.</p>
<p>The following methods can be chained on the object before a select.</p>
<ul>
<li>ho_distinct: ensures that there are no duplicates on the select result.</li>
<li>ho_order_by: sets the order of the select result.</li>
<li>ho_limit: limits the number of elements returned by the select method.</li>
<li>ho_offset: sets the offset for the select method.</li>
</ul>









  <div class="doc doc-children">






<h3 id="half_orm.relation-classes">Classes<a href="#half_orm.relation-classes" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-class">



<h4 id="half_orm.relation.DC_Relation" class="doc doc-heading">
            <code>DC_Relation</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#half_orm.relation.DC_Relation" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">








              <details class="quote">
                <summary>Source code in <code>half_orm/relation.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="nd">@dataclass</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="k">class</span><span class="w"> </span><span class="nc">DC_Relation</span><span class="p">:</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="o">...</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert a new tuple into the Relation.</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">            Dict: A dictionary containing the data inserted.</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">            &gt;&gt;&gt; gaston = Person(last_name=&#39;La&#39;, first_name=&#39;Ga&#39;, birth_date=&#39;1970-01-01&#39;).ho_insert()</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">            &gt;&gt;&gt; print(gaston)</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="sd">            {&#39;id&#39;: 1772, &#39;first_name&#39;: &#39;Ga&#39;, &#39;last_name&#39;: &#39;La&#39;, &#39;birth_date&#39;: datetime.date(1970, 1, 1)}</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="sd">            It is not possible to insert more than one row with the ho_insert method</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="o">...</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the set of values correponding to the constraint attached to self.</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">        This method is a generator.</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">        Arguments:</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">            *args: the fields names of the returned attributes. If omitted,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">                all the fields are returned.</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">        Yields:</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">            the result of the query as a list of dictionaries.</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">            &gt;&gt;&gt; for person in Person(last_name=(&#39;like&#39;, &#39;La%&#39;)).ho_select(&#39;id&#39;):</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">            &gt;&gt;&gt;     print(person)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">            {&#39;id&#39;: 1772}</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="o">...</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">update_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates the elements defined by self.</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">        Arguments:</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">            **kwargs: the values to be updated {[field name:value]}</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">            *args [Optional]: the list of columns names to return in the dictionary list for the updated elements. If args is (&#39;*&#39;, ), returns all the columns values.</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">            update_all: a boolean that must be set to True if there is no constraint on</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">            self. Defaults to False.</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span class="o">...</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">delete_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;removes all elements from the set that correspond to the constraint.</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">        Arguments:</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">            *args [Optional]:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="o">...</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;Relation&#39;</span><span class="p">:</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The get method allows you to fetch a singleton from the database.</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">        It garantees that the constraint references one and only one tuple.</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">        Arguments:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">            args (List[str]): list of fields names.\</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">            If ommitted, all the values of the row retreived from the database\</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">            are set for the self object.\</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">            Otherwise, only the values listed in the `args` parameter are set.</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">            Relation: the object retreived from the database.</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">            ExpectedOneError: an exception is raised if no or more than one element is found.</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">            &gt;&gt;&gt; gaston = Person(last_name=&#39;Lagaffe&#39;, first_name=&#39;Gaston&#39;).ho_get()</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">            &gt;&gt;&gt; type(gaston) is Person</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">            True</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">            &gt;&gt;&gt; gaston.id</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">            (int4) NOT NULL (id = 1772)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">            &gt;&gt;&gt; str(gaston.id)</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="sd">            &#39;1772&#39;</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="sd">            &gt;&gt;&gt; gaston.id.value</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="sd">            1772</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="o">...</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_is_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if one field at least is set or if self has been</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="sd">        constrained by at least one of its foreign keys or self is the</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="sd">        result of a combination of Relations (using set operators).</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span class="o">...</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_distinct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set distinct for the SQL request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>        <span class="o">...</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_unaccent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">fields_names</span><span class="p">):</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>        <span class="s2">&quot;Sets unaccent for each field listed in fields_names&quot;</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>        <span class="o">...</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_order_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_order_</span><span class="p">):</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the SQL `order by` according to the &quot;_order_&quot; string passed</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">        Example :</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">            personnes.ho_order_by(&quot;field1, field2 desc, field3, field4 desc&quot;)</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>        <span class="o">...</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_limit_</span><span class="p">):</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the limit for the next SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>        <span class="o">...</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_offset_</span><span class="p">):</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the offset for the next SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span class="o">...</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the number of tuples matching the intention in the relation.</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span class="o">...</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if the self is an empty set, False otherwise.</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span class="o">...</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<h5 id="half_orm.relation.DC_Relation-functions">Functions<a href="#half_orm.relation.DC_Relation-functions" class="headerlink" title="Permanent link">&para;</a></h5>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_count" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_count</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_count" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns the number of tuples matching the intention in the relation.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the number of tuples matching the intention in the relation.</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_delete</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">delete_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_delete" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>removes all elements from the set that correspond to the constraint.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code>[<span title="Optional">Optional</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">delete_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;removes all elements from the set that correspond to the constraint.</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    Arguments:</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">        *args [Optional]:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_distinct" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_distinct</span><span class="p">()</span></code>

<a href="#half_orm.relation.DC_Relation.ho_distinct" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Set distinct for the SQL request.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_distinct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set distinct for the SQL request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_get" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>The get method allows you to fetch a singleton from the database.
It garantees that the constraint references one and only one tuple.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of fields names.            If ommitted, all the values of the row retreived from the database            are set for the self object.            Otherwise, only the values listed in the <code>args</code> parameter are set.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Relation</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Relation (half_orm.relation.Relation)" href="#half_orm.relation.Relation">Relation</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the object retreived from the database.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ExpectedOneError">ExpectedOneError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>an exception is raised if no or more than one element is found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>gaston = Person(last_name='Lagaffe', first_name='Gaston').ho_get()
type(gaston) is Person
True
gaston.id
(int4) NOT NULL (id = 1772)
str(gaston.id)
'1772'
gaston.id.value
1772</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;Relation&#39;</span><span class="p">:</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The get method allows you to fetch a singleton from the database.</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">    It garantees that the constraint references one and only one tuple.</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">    Arguments:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">        args (List[str]): list of fields names.\</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">        If ommitted, all the values of the row retreived from the database\</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">        are set for the self object.\</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">        Otherwise, only the values listed in the `args` parameter are set.</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">        Relation: the object retreived from the database.</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">        ExpectedOneError: an exception is raised if no or more than one element is found.</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">        &gt;&gt;&gt; gaston = Person(last_name=&#39;Lagaffe&#39;, first_name=&#39;Gaston&#39;).ho_get()</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">        &gt;&gt;&gt; type(gaston) is Person</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">        True</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">        &gt;&gt;&gt; gaston.id</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">        (int4) NOT NULL (id = 1772)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">        &gt;&gt;&gt; str(gaston.id)</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="sd">        &#39;1772&#39;</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="sd">        &gt;&gt;&gt; gaston.id.value</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="sd">        1772</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_insert" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_insert</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_insert" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Insert a new tuple into the Relation.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Dict</code></td>            <td>
                  <code><span title="typing.Dict">Dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the data inserted.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p 1772_="1772," 1_="1)" _Ga_="'Ga'," _La_="'La'," _birth_date_:="'birth_date':" _first_name_:="'first_name':" _id_:="'id':" _last_name_:="'last_name':" datetime.date_1970_="datetime.date(1970,">gaston = Person(last_name='La', first_name='Ga', birth_date='1970-01-01').ho_insert()
print(gaston)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>It is not possible to insert more than one row with the ho_insert method</p>
</details>

            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Insert a new tuple into the Relation.</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">        Dict: A dictionary containing the data inserted.</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">        &gt;&gt;&gt; gaston = Person(last_name=&#39;La&#39;, first_name=&#39;Ga&#39;, birth_date=&#39;1970-01-01&#39;).ho_insert()</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">        &gt;&gt;&gt; print(gaston)</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="sd">        {&#39;id&#39;: 1772, &#39;first_name&#39;: &#39;Ga&#39;, &#39;last_name&#39;: &#39;La&#39;, &#39;birth_date&#39;: datetime.date(1970, 1, 1)}</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="sd">        It is not possible to insert more than one row with the ho_insert method</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_is_empty" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_is_empty</span><span class="p">()</span></code>

<a href="#half_orm.relation.DC_Relation.ho_is_empty" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns True if the self is an empty set, False otherwise.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns True if the self is an empty set, False otherwise.</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_is_set" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_is_set</span><span class="p">()</span></code>

<a href="#half_orm.relation.DC_Relation.ho_is_set" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Return True if one field at least is set or if self has been
constrained by at least one of its foreign keys or self is the
result of a combination of Relations (using set operators).</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-176" name="__codelineno-0-176"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_is_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return True if one field at least is set or if self has been</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="sd">    constrained by at least one of its foreign keys or self is the</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="sd">    result of a combination of Relations (using set operators).</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_limit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_limit</span><span class="p">(</span><span class="n">_limit_</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_limit" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Sets the limit for the next SQL select request.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_limit_</span><span class="p">):</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the limit for the next SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_offset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_offset</span><span class="p">(</span><span class="n">_offset_</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_offset" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Set the offset for the next SQL select request.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_offset_</span><span class="p">):</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the offset for the next SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_order_by" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_order_by</span><span class="p">(</span><span class="n">_order_</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_order_by" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Sets the SQL <code>order by</code> according to the "<em>order</em>" string passed</p>


<details class="example-" open>
  <summary>Example</summary>
  <p>personnes.ho_order_by("field1, field2 desc, field3, field4 desc")</p>
</details>

            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_order_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_order_</span><span class="p">):</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the SQL `order by` according to the &quot;_order_&quot; string passed</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">    Example :</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">        personnes.ho_order_by(&quot;field1, field2 desc, field3, field4 desc&quot;)</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_select" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_select" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Gets the set of values correponding to the constraint attached to self.
This method is a generator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the fields names of the returned attributes. If omitted,
all the fields are returned.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the result of the query as a list of dictionaries.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p 1772="1772" _id_:="'id':">for person in Person(last_name=('like', 'La%')).ho_select('id'):
    print(person)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the set of values correponding to the constraint attached to self.</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">    This method is a generator.</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">    Arguments:</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">        *args: the fields names of the returned attributes. If omitted,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">            all the fields are returned.</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">    Yields:</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">        the result of the query as a list of dictionaries.</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">        &gt;&gt;&gt; for person in Person(last_name=(&#39;like&#39;, &#39;La%&#39;)).ho_select(&#39;id&#39;):</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">        &gt;&gt;&gt;     print(person)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">        {&#39;id&#39;: 1772}</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_unaccent" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_unaccent</span><span class="p">(</span><span class="o">*</span><span class="n">fields_names</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_unaccent" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Sets unaccent for each field listed in fields_names</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_unaccent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">fields_names</span><span class="p">):</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>    <span class="s2">&quot;Sets unaccent for each field listed in fields_names&quot;</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.DC_Relation.ho_update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_update</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">update_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#half_orm.relation.DC_Relation.ho_update" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Updates the elements defined by self.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the values to be updated {[field name:value]}</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
                  <code>[<span title="Optional">Optional</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of columns names to return in the dictionary list for the updated elements. If args is ('*', ), returns all the columns values.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>update_all</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a boolean that must be set to True if there is no constraint on</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">update_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Updates the elements defined by self.</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">    Arguments:</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">        **kwargs: the values to be updated {[field name:value]}</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">        *args [Optional]: the list of columns names to return in the dictionary list for the updated elements. If args is (&#39;*&#39;, ), returns all the columns values.</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">        update_all: a boolean that must be set to True if there is no constraint on</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">        self. Defaults to False.</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="half_orm.relation.Relation" class="doc doc-heading">
            <code>Relation</code>


<a href="#half_orm.relation.Relation" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">


        <p>Used as a base class for the classes generated by
<code>Model.get_relation_class &lt;#half_orm.model.Model.get_relation_class&gt;</code>_.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>**kwargs</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the arguments names must correspond to the columns names of the relation.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="UnknownAttributeError">UnknownAttributeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the name of an argument doesn't match a column name in the
relation considered.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <p>You can generate a class for any relation in your database:
    &gt;&gt;&gt; from half_orm.model import Model
    &gt;&gt;&gt; model = Model('halftest')
    &gt;&gt;&gt; class Person(model.get_relation_class('actor.person')):
    &gt;&gt;&gt;     # your code</p>
<p>To define a set of data in your relation at instantiation:
    &gt;&gt;&gt; gaston = Person(last_name='Lagaffe', first_name='Gaston')
    &gt;&gt;&gt; all_names_starting_with_la = Person(last_name=('ilike', 'la%'))</p>
<p>Or to constrain an instantiated object via its            <code>Fields &lt;#half_orm.field.Field&gt;</code>_:
    &gt;&gt;&gt; person = Person()
    &gt;&gt;&gt; person.birth_date = ('&gt;', '1970-01-01')</p>
<p>Raises an <code>UnknownAttributeError &lt;#half_orm.relation_errors.UnknownAttributeError&gt;</code>_:
    &gt;&gt;&gt; Person(lost_name='Lagaffe')
    [...]UnknownAttributeError: ERROR! Unknown attribute: {'lost_name'}.</p>







              <details class="quote">
                <summary>Source code in <code>half_orm/relation.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-217"> 217</a></span>
<span class="normal"><a href="#__codelineno-0-218"> 218</a></span>
<span class="normal"><a href="#__codelineno-0-219"> 219</a></span>
<span class="normal"><a href="#__codelineno-0-220"> 220</a></span>
<span class="normal"><a href="#__codelineno-0-221"> 221</a></span>
<span class="normal"><a href="#__codelineno-0-222"> 222</a></span>
<span class="normal"><a href="#__codelineno-0-223"> 223</a></span>
<span class="normal"><a href="#__codelineno-0-224"> 224</a></span>
<span class="normal"><a href="#__codelineno-0-225"> 225</a></span>
<span class="normal"><a href="#__codelineno-0-226"> 226</a></span>
<span class="normal"><a href="#__codelineno-0-227"> 227</a></span>
<span class="normal"><a href="#__codelineno-0-228"> 228</a></span>
<span class="normal"><a href="#__codelineno-0-229"> 229</a></span>
<span class="normal"><a href="#__codelineno-0-230"> 230</a></span>
<span class="normal"><a href="#__codelineno-0-231"> 231</a></span>
<span class="normal"><a href="#__codelineno-0-232"> 232</a></span>
<span class="normal"><a href="#__codelineno-0-233"> 233</a></span>
<span class="normal"><a href="#__codelineno-0-234"> 234</a></span>
<span class="normal"><a href="#__codelineno-0-235"> 235</a></span>
<span class="normal"><a href="#__codelineno-0-236"> 236</a></span>
<span class="normal"><a href="#__codelineno-0-237"> 237</a></span>
<span class="normal"><a href="#__codelineno-0-238"> 238</a></span>
<span class="normal"><a href="#__codelineno-0-239"> 239</a></span>
<span class="normal"><a href="#__codelineno-0-240"> 240</a></span>
<span class="normal"><a href="#__codelineno-0-241"> 241</a></span>
<span class="normal"><a href="#__codelineno-0-242"> 242</a></span>
<span class="normal"><a href="#__codelineno-0-243"> 243</a></span>
<span class="normal"><a href="#__codelineno-0-244"> 244</a></span>
<span class="normal"><a href="#__codelineno-0-245"> 245</a></span>
<span class="normal"><a href="#__codelineno-0-246"> 246</a></span>
<span class="normal"><a href="#__codelineno-0-247"> 247</a></span>
<span class="normal"><a href="#__codelineno-0-248"> 248</a></span>
<span class="normal"><a href="#__codelineno-0-249"> 249</a></span>
<span class="normal"><a href="#__codelineno-0-250"> 250</a></span>
<span class="normal"><a href="#__codelineno-0-251"> 251</a></span>
<span class="normal"><a href="#__codelineno-0-252"> 252</a></span>
<span class="normal"><a href="#__codelineno-0-253"> 253</a></span>
<span class="normal"><a href="#__codelineno-0-254"> 254</a></span>
<span class="normal"><a href="#__codelineno-0-255"> 255</a></span>
<span class="normal"><a href="#__codelineno-0-256"> 256</a></span>
<span class="normal"><a href="#__codelineno-0-257"> 257</a></span>
<span class="normal"><a href="#__codelineno-0-258"> 258</a></span>
<span class="normal"><a href="#__codelineno-0-259"> 259</a></span>
<span class="normal"><a href="#__codelineno-0-260"> 260</a></span>
<span class="normal"><a href="#__codelineno-0-261"> 261</a></span>
<span class="normal"><a href="#__codelineno-0-262"> 262</a></span>
<span class="normal"><a href="#__codelineno-0-263"> 263</a></span>
<span class="normal"><a href="#__codelineno-0-264"> 264</a></span>
<span class="normal"><a href="#__codelineno-0-265"> 265</a></span>
<span class="normal"><a href="#__codelineno-0-266"> 266</a></span>
<span class="normal"><a href="#__codelineno-0-267"> 267</a></span>
<span class="normal"><a href="#__codelineno-0-268"> 268</a></span>
<span class="normal"><a href="#__codelineno-0-269"> 269</a></span>
<span class="normal"><a href="#__codelineno-0-270"> 270</a></span>
<span class="normal"><a href="#__codelineno-0-271"> 271</a></span>
<span class="normal"><a href="#__codelineno-0-272"> 272</a></span>
<span class="normal"><a href="#__codelineno-0-273"> 273</a></span>
<span class="normal"><a href="#__codelineno-0-274"> 274</a></span>
<span class="normal"><a href="#__codelineno-0-275"> 275</a></span>
<span class="normal"><a href="#__codelineno-0-276"> 276</a></span>
<span class="normal"><a href="#__codelineno-0-277"> 277</a></span>
<span class="normal"><a href="#__codelineno-0-278"> 278</a></span>
<span class="normal"><a href="#__codelineno-0-279"> 279</a></span>
<span class="normal"><a href="#__codelineno-0-280"> 280</a></span>
<span class="normal"><a href="#__codelineno-0-281"> 281</a></span>
<span class="normal"><a href="#__codelineno-0-282"> 282</a></span>
<span class="normal"><a href="#__codelineno-0-283"> 283</a></span>
<span class="normal"><a href="#__codelineno-0-284"> 284</a></span>
<span class="normal"><a href="#__codelineno-0-285"> 285</a></span>
<span class="normal"><a href="#__codelineno-0-286"> 286</a></span>
<span class="normal"><a href="#__codelineno-0-287"> 287</a></span>
<span class="normal"><a href="#__codelineno-0-288"> 288</a></span>
<span class="normal"><a href="#__codelineno-0-289"> 289</a></span>
<span class="normal"><a href="#__codelineno-0-290"> 290</a></span>
<span class="normal"><a href="#__codelineno-0-291"> 291</a></span>
<span class="normal"><a href="#__codelineno-0-292"> 292</a></span>
<span class="normal"><a href="#__codelineno-0-293"> 293</a></span>
<span class="normal"><a href="#__codelineno-0-294"> 294</a></span>
<span class="normal"><a href="#__codelineno-0-295"> 295</a></span>
<span class="normal"><a href="#__codelineno-0-296"> 296</a></span>
<span class="normal"><a href="#__codelineno-0-297"> 297</a></span>
<span class="normal"><a href="#__codelineno-0-298"> 298</a></span>
<span class="normal"><a href="#__codelineno-0-299"> 299</a></span>
<span class="normal"><a href="#__codelineno-0-300"> 300</a></span>
<span class="normal"><a href="#__codelineno-0-301"> 301</a></span>
<span class="normal"><a href="#__codelineno-0-302"> 302</a></span>
<span class="normal"><a href="#__codelineno-0-303"> 303</a></span>
<span class="normal"><a href="#__codelineno-0-304"> 304</a></span>
<span class="normal"><a href="#__codelineno-0-305"> 305</a></span>
<span class="normal"><a href="#__codelineno-0-306"> 306</a></span>
<span class="normal"><a href="#__codelineno-0-307"> 307</a></span>
<span class="normal"><a href="#__codelineno-0-308"> 308</a></span>
<span class="normal"><a href="#__codelineno-0-309"> 309</a></span>
<span class="normal"><a href="#__codelineno-0-310"> 310</a></span>
<span class="normal"><a href="#__codelineno-0-311"> 311</a></span>
<span class="normal"><a href="#__codelineno-0-312"> 312</a></span>
<span class="normal"><a href="#__codelineno-0-313"> 313</a></span>
<span class="normal"><a href="#__codelineno-0-314"> 314</a></span>
<span class="normal"><a href="#__codelineno-0-315"> 315</a></span>
<span class="normal"><a href="#__codelineno-0-316"> 316</a></span>
<span class="normal"><a href="#__codelineno-0-317"> 317</a></span>
<span class="normal"><a href="#__codelineno-0-318"> 318</a></span>
<span class="normal"><a href="#__codelineno-0-319"> 319</a></span>
<span class="normal"><a href="#__codelineno-0-320"> 320</a></span>
<span class="normal"><a href="#__codelineno-0-321"> 321</a></span>
<span class="normal"><a href="#__codelineno-0-322"> 322</a></span>
<span class="normal"><a href="#__codelineno-0-323"> 323</a></span>
<span class="normal"><a href="#__codelineno-0-324"> 324</a></span>
<span class="normal"><a href="#__codelineno-0-325"> 325</a></span>
<span class="normal"><a href="#__codelineno-0-326"> 326</a></span>
<span class="normal"><a href="#__codelineno-0-327"> 327</a></span>
<span class="normal"><a href="#__codelineno-0-328"> 328</a></span>
<span class="normal"><a href="#__codelineno-0-329"> 329</a></span>
<span class="normal"><a href="#__codelineno-0-330"> 330</a></span>
<span class="normal"><a href="#__codelineno-0-331"> 331</a></span>
<span class="normal"><a href="#__codelineno-0-332"> 332</a></span>
<span class="normal"><a href="#__codelineno-0-333"> 333</a></span>
<span class="normal"><a href="#__codelineno-0-334"> 334</a></span>
<span class="normal"><a href="#__codelineno-0-335"> 335</a></span>
<span class="normal"><a href="#__codelineno-0-336"> 336</a></span>
<span class="normal"><a href="#__codelineno-0-337"> 337</a></span>
<span class="normal"><a href="#__codelineno-0-338"> 338</a></span>
<span class="normal"><a href="#__codelineno-0-339"> 339</a></span>
<span class="normal"><a href="#__codelineno-0-340"> 340</a></span>
<span class="normal"><a href="#__codelineno-0-341"> 341</a></span>
<span class="normal"><a href="#__codelineno-0-342"> 342</a></span>
<span class="normal"><a href="#__codelineno-0-343"> 343</a></span>
<span class="normal"><a href="#__codelineno-0-344"> 344</a></span>
<span class="normal"><a href="#__codelineno-0-345"> 345</a></span>
<span class="normal"><a href="#__codelineno-0-346"> 346</a></span>
<span class="normal"><a href="#__codelineno-0-347"> 347</a></span>
<span class="normal"><a href="#__codelineno-0-348"> 348</a></span>
<span class="normal"><a href="#__codelineno-0-349"> 349</a></span>
<span class="normal"><a href="#__codelineno-0-350"> 350</a></span>
<span class="normal"><a href="#__codelineno-0-351"> 351</a></span>
<span class="normal"><a href="#__codelineno-0-352"> 352</a></span>
<span class="normal"><a href="#__codelineno-0-353"> 353</a></span>
<span class="normal"><a href="#__codelineno-0-354"> 354</a></span>
<span class="normal"><a href="#__codelineno-0-355"> 355</a></span>
<span class="normal"><a href="#__codelineno-0-356"> 356</a></span>
<span class="normal"><a href="#__codelineno-0-357"> 357</a></span>
<span class="normal"><a href="#__codelineno-0-358"> 358</a></span>
<span class="normal"><a href="#__codelineno-0-359"> 359</a></span>
<span class="normal"><a href="#__codelineno-0-360"> 360</a></span>
<span class="normal"><a href="#__codelineno-0-361"> 361</a></span>
<span class="normal"><a href="#__codelineno-0-362"> 362</a></span>
<span class="normal"><a href="#__codelineno-0-363"> 363</a></span>
<span class="normal"><a href="#__codelineno-0-364"> 364</a></span>
<span class="normal"><a href="#__codelineno-0-365"> 365</a></span>
<span class="normal"><a href="#__codelineno-0-366"> 366</a></span>
<span class="normal"><a href="#__codelineno-0-367"> 367</a></span>
<span class="normal"><a href="#__codelineno-0-368"> 368</a></span>
<span class="normal"><a href="#__codelineno-0-369"> 369</a></span>
<span class="normal"><a href="#__codelineno-0-370"> 370</a></span>
<span class="normal"><a href="#__codelineno-0-371"> 371</a></span>
<span class="normal"><a href="#__codelineno-0-372"> 372</a></span>
<span class="normal"><a href="#__codelineno-0-373"> 373</a></span>
<span class="normal"><a href="#__codelineno-0-374"> 374</a></span>
<span class="normal"><a href="#__codelineno-0-375"> 375</a></span>
<span class="normal"><a href="#__codelineno-0-376"> 376</a></span>
<span class="normal"><a href="#__codelineno-0-377"> 377</a></span>
<span class="normal"><a href="#__codelineno-0-378"> 378</a></span>
<span class="normal"><a href="#__codelineno-0-379"> 379</a></span>
<span class="normal"><a href="#__codelineno-0-380"> 380</a></span>
<span class="normal"><a href="#__codelineno-0-381"> 381</a></span>
<span class="normal"><a href="#__codelineno-0-382"> 382</a></span>
<span class="normal"><a href="#__codelineno-0-383"> 383</a></span>
<span class="normal"><a href="#__codelineno-0-384"> 384</a></span>
<span class="normal"><a href="#__codelineno-0-385"> 385</a></span>
<span class="normal"><a href="#__codelineno-0-386"> 386</a></span>
<span class="normal"><a href="#__codelineno-0-387"> 387</a></span>
<span class="normal"><a href="#__codelineno-0-388"> 388</a></span>
<span class="normal"><a href="#__codelineno-0-389"> 389</a></span>
<span class="normal"><a href="#__codelineno-0-390"> 390</a></span>
<span class="normal"><a href="#__codelineno-0-391"> 391</a></span>
<span class="normal"><a href="#__codelineno-0-392"> 392</a></span>
<span class="normal"><a href="#__codelineno-0-393"> 393</a></span>
<span class="normal"><a href="#__codelineno-0-394"> 394</a></span>
<span class="normal"><a href="#__codelineno-0-395"> 395</a></span>
<span class="normal"><a href="#__codelineno-0-396"> 396</a></span>
<span class="normal"><a href="#__codelineno-0-397"> 397</a></span>
<span class="normal"><a href="#__codelineno-0-398"> 398</a></span>
<span class="normal"><a href="#__codelineno-0-399"> 399</a></span>
<span class="normal"><a href="#__codelineno-0-400"> 400</a></span>
<span class="normal"><a href="#__codelineno-0-401"> 401</a></span>
<span class="normal"><a href="#__codelineno-0-402"> 402</a></span>
<span class="normal"><a href="#__codelineno-0-403"> 403</a></span>
<span class="normal"><a href="#__codelineno-0-404"> 404</a></span>
<span class="normal"><a href="#__codelineno-0-405"> 405</a></span>
<span class="normal"><a href="#__codelineno-0-406"> 406</a></span>
<span class="normal"><a href="#__codelineno-0-407"> 407</a></span>
<span class="normal"><a href="#__codelineno-0-408"> 408</a></span>
<span class="normal"><a href="#__codelineno-0-409"> 409</a></span>
<span class="normal"><a href="#__codelineno-0-410"> 410</a></span>
<span class="normal"><a href="#__codelineno-0-411"> 411</a></span>
<span class="normal"><a href="#__codelineno-0-412"> 412</a></span>
<span class="normal"><a href="#__codelineno-0-413"> 413</a></span>
<span class="normal"><a href="#__codelineno-0-414"> 414</a></span>
<span class="normal"><a href="#__codelineno-0-415"> 415</a></span>
<span class="normal"><a href="#__codelineno-0-416"> 416</a></span>
<span class="normal"><a href="#__codelineno-0-417"> 417</a></span>
<span class="normal"><a href="#__codelineno-0-418"> 418</a></span>
<span class="normal"><a href="#__codelineno-0-419"> 419</a></span>
<span class="normal"><a href="#__codelineno-0-420"> 420</a></span>
<span class="normal"><a href="#__codelineno-0-421"> 421</a></span>
<span class="normal"><a href="#__codelineno-0-422"> 422</a></span>
<span class="normal"><a href="#__codelineno-0-423"> 423</a></span>
<span class="normal"><a href="#__codelineno-0-424"> 424</a></span>
<span class="normal"><a href="#__codelineno-0-425"> 425</a></span>
<span class="normal"><a href="#__codelineno-0-426"> 426</a></span>
<span class="normal"><a href="#__codelineno-0-427"> 427</a></span>
<span class="normal"><a href="#__codelineno-0-428"> 428</a></span>
<span class="normal"><a href="#__codelineno-0-429"> 429</a></span>
<span class="normal"><a href="#__codelineno-0-430"> 430</a></span>
<span class="normal"><a href="#__codelineno-0-431"> 431</a></span>
<span class="normal"><a href="#__codelineno-0-432"> 432</a></span>
<span class="normal"><a href="#__codelineno-0-433"> 433</a></span>
<span class="normal"><a href="#__codelineno-0-434"> 434</a></span>
<span class="normal"><a href="#__codelineno-0-435"> 435</a></span>
<span class="normal"><a href="#__codelineno-0-436"> 436</a></span>
<span class="normal"><a href="#__codelineno-0-437"> 437</a></span>
<span class="normal"><a href="#__codelineno-0-438"> 438</a></span>
<span class="normal"><a href="#__codelineno-0-439"> 439</a></span>
<span class="normal"><a href="#__codelineno-0-440"> 440</a></span>
<span class="normal"><a href="#__codelineno-0-441"> 441</a></span>
<span class="normal"><a href="#__codelineno-0-442"> 442</a></span>
<span class="normal"><a href="#__codelineno-0-443"> 443</a></span>
<span class="normal"><a href="#__codelineno-0-444"> 444</a></span>
<span class="normal"><a href="#__codelineno-0-445"> 445</a></span>
<span class="normal"><a href="#__codelineno-0-446"> 446</a></span>
<span class="normal"><a href="#__codelineno-0-447"> 447</a></span>
<span class="normal"><a href="#__codelineno-0-448"> 448</a></span>
<span class="normal"><a href="#__codelineno-0-449"> 449</a></span>
<span class="normal"><a href="#__codelineno-0-450"> 450</a></span>
<span class="normal"><a href="#__codelineno-0-451"> 451</a></span>
<span class="normal"><a href="#__codelineno-0-452"> 452</a></span>
<span class="normal"><a href="#__codelineno-0-453"> 453</a></span>
<span class="normal"><a href="#__codelineno-0-454"> 454</a></span>
<span class="normal"><a href="#__codelineno-0-455"> 455</a></span>
<span class="normal"><a href="#__codelineno-0-456"> 456</a></span>
<span class="normal"><a href="#__codelineno-0-457"> 457</a></span>
<span class="normal"><a href="#__codelineno-0-458"> 458</a></span>
<span class="normal"><a href="#__codelineno-0-459"> 459</a></span>
<span class="normal"><a href="#__codelineno-0-460"> 460</a></span>
<span class="normal"><a href="#__codelineno-0-461"> 461</a></span>
<span class="normal"><a href="#__codelineno-0-462"> 462</a></span>
<span class="normal"><a href="#__codelineno-0-463"> 463</a></span>
<span class="normal"><a href="#__codelineno-0-464"> 464</a></span>
<span class="normal"><a href="#__codelineno-0-465"> 465</a></span>
<span class="normal"><a href="#__codelineno-0-466"> 466</a></span>
<span class="normal"><a href="#__codelineno-0-467"> 467</a></span>
<span class="normal"><a href="#__codelineno-0-468"> 468</a></span>
<span class="normal"><a href="#__codelineno-0-469"> 469</a></span>
<span class="normal"><a href="#__codelineno-0-470"> 470</a></span>
<span class="normal"><a href="#__codelineno-0-471"> 471</a></span>
<span class="normal"><a href="#__codelineno-0-472"> 472</a></span>
<span class="normal"><a href="#__codelineno-0-473"> 473</a></span>
<span class="normal"><a href="#__codelineno-0-474"> 474</a></span>
<span class="normal"><a href="#__codelineno-0-475"> 475</a></span>
<span class="normal"><a href="#__codelineno-0-476"> 476</a></span>
<span class="normal"><a href="#__codelineno-0-477"> 477</a></span>
<span class="normal"><a href="#__codelineno-0-478"> 478</a></span>
<span class="normal"><a href="#__codelineno-0-479"> 479</a></span>
<span class="normal"><a href="#__codelineno-0-480"> 480</a></span>
<span class="normal"><a href="#__codelineno-0-481"> 481</a></span>
<span class="normal"><a href="#__codelineno-0-482"> 482</a></span>
<span class="normal"><a href="#__codelineno-0-483"> 483</a></span>
<span class="normal"><a href="#__codelineno-0-484"> 484</a></span>
<span class="normal"><a href="#__codelineno-0-485"> 485</a></span>
<span class="normal"><a href="#__codelineno-0-486"> 486</a></span>
<span class="normal"><a href="#__codelineno-0-487"> 487</a></span>
<span class="normal"><a href="#__codelineno-0-488"> 488</a></span>
<span class="normal"><a href="#__codelineno-0-489"> 489</a></span>
<span class="normal"><a href="#__codelineno-0-490"> 490</a></span>
<span class="normal"><a href="#__codelineno-0-491"> 491</a></span>
<span class="normal"><a href="#__codelineno-0-492"> 492</a></span>
<span class="normal"><a href="#__codelineno-0-493"> 493</a></span>
<span class="normal"><a href="#__codelineno-0-494"> 494</a></span>
<span class="normal"><a href="#__codelineno-0-495"> 495</a></span>
<span class="normal"><a href="#__codelineno-0-496"> 496</a></span>
<span class="normal"><a href="#__codelineno-0-497"> 497</a></span>
<span class="normal"><a href="#__codelineno-0-498"> 498</a></span>
<span class="normal"><a href="#__codelineno-0-499"> 499</a></span>
<span class="normal"><a href="#__codelineno-0-500"> 500</a></span>
<span class="normal"><a href="#__codelineno-0-501"> 501</a></span>
<span class="normal"><a href="#__codelineno-0-502"> 502</a></span>
<span class="normal"><a href="#__codelineno-0-503"> 503</a></span>
<span class="normal"><a href="#__codelineno-0-504"> 504</a></span>
<span class="normal"><a href="#__codelineno-0-505"> 505</a></span>
<span class="normal"><a href="#__codelineno-0-506"> 506</a></span>
<span class="normal"><a href="#__codelineno-0-507"> 507</a></span>
<span class="normal"><a href="#__codelineno-0-508"> 508</a></span>
<span class="normal"><a href="#__codelineno-0-509"> 509</a></span>
<span class="normal"><a href="#__codelineno-0-510"> 510</a></span>
<span class="normal"><a href="#__codelineno-0-511"> 511</a></span>
<span class="normal"><a href="#__codelineno-0-512"> 512</a></span>
<span class="normal"><a href="#__codelineno-0-513"> 513</a></span>
<span class="normal"><a href="#__codelineno-0-514"> 514</a></span>
<span class="normal"><a href="#__codelineno-0-515"> 515</a></span>
<span class="normal"><a href="#__codelineno-0-516"> 516</a></span>
<span class="normal"><a href="#__codelineno-0-517"> 517</a></span>
<span class="normal"><a href="#__codelineno-0-518"> 518</a></span>
<span class="normal"><a href="#__codelineno-0-519"> 519</a></span>
<span class="normal"><a href="#__codelineno-0-520"> 520</a></span>
<span class="normal"><a href="#__codelineno-0-521"> 521</a></span>
<span class="normal"><a href="#__codelineno-0-522"> 522</a></span>
<span class="normal"><a href="#__codelineno-0-523"> 523</a></span>
<span class="normal"><a href="#__codelineno-0-524"> 524</a></span>
<span class="normal"><a href="#__codelineno-0-525"> 525</a></span>
<span class="normal"><a href="#__codelineno-0-526"> 526</a></span>
<span class="normal"><a href="#__codelineno-0-527"> 527</a></span>
<span class="normal"><a href="#__codelineno-0-528"> 528</a></span>
<span class="normal"><a href="#__codelineno-0-529"> 529</a></span>
<span class="normal"><a href="#__codelineno-0-530"> 530</a></span>
<span class="normal"><a href="#__codelineno-0-531"> 531</a></span>
<span class="normal"><a href="#__codelineno-0-532"> 532</a></span>
<span class="normal"><a href="#__codelineno-0-533"> 533</a></span>
<span class="normal"><a href="#__codelineno-0-534"> 534</a></span>
<span class="normal"><a href="#__codelineno-0-535"> 535</a></span>
<span class="normal"><a href="#__codelineno-0-536"> 536</a></span>
<span class="normal"><a href="#__codelineno-0-537"> 537</a></span>
<span class="normal"><a href="#__codelineno-0-538"> 538</a></span>
<span class="normal"><a href="#__codelineno-0-539"> 539</a></span>
<span class="normal"><a href="#__codelineno-0-540"> 540</a></span>
<span class="normal"><a href="#__codelineno-0-541"> 541</a></span>
<span class="normal"><a href="#__codelineno-0-542"> 542</a></span>
<span class="normal"><a href="#__codelineno-0-543"> 543</a></span>
<span class="normal"><a href="#__codelineno-0-544"> 544</a></span>
<span class="normal"><a href="#__codelineno-0-545"> 545</a></span>
<span class="normal"><a href="#__codelineno-0-546"> 546</a></span>
<span class="normal"><a href="#__codelineno-0-547"> 547</a></span>
<span class="normal"><a href="#__codelineno-0-548"> 548</a></span>
<span class="normal"><a href="#__codelineno-0-549"> 549</a></span>
<span class="normal"><a href="#__codelineno-0-550"> 550</a></span>
<span class="normal"><a href="#__codelineno-0-551"> 551</a></span>
<span class="normal"><a href="#__codelineno-0-552"> 552</a></span>
<span class="normal"><a href="#__codelineno-0-553"> 553</a></span>
<span class="normal"><a href="#__codelineno-0-554"> 554</a></span>
<span class="normal"><a href="#__codelineno-0-555"> 555</a></span>
<span class="normal"><a href="#__codelineno-0-556"> 556</a></span>
<span class="normal"><a href="#__codelineno-0-557"> 557</a></span>
<span class="normal"><a href="#__codelineno-0-558"> 558</a></span>
<span class="normal"><a href="#__codelineno-0-559"> 559</a></span>
<span class="normal"><a href="#__codelineno-0-560"> 560</a></span>
<span class="normal"><a href="#__codelineno-0-561"> 561</a></span>
<span class="normal"><a href="#__codelineno-0-562"> 562</a></span>
<span class="normal"><a href="#__codelineno-0-563"> 563</a></span>
<span class="normal"><a href="#__codelineno-0-564"> 564</a></span>
<span class="normal"><a href="#__codelineno-0-565"> 565</a></span>
<span class="normal"><a href="#__codelineno-0-566"> 566</a></span>
<span class="normal"><a href="#__codelineno-0-567"> 567</a></span>
<span class="normal"><a href="#__codelineno-0-568"> 568</a></span>
<span class="normal"><a href="#__codelineno-0-569"> 569</a></span>
<span class="normal"><a href="#__codelineno-0-570"> 570</a></span>
<span class="normal"><a href="#__codelineno-0-571"> 571</a></span>
<span class="normal"><a href="#__codelineno-0-572"> 572</a></span>
<span class="normal"><a href="#__codelineno-0-573"> 573</a></span>
<span class="normal"><a href="#__codelineno-0-574"> 574</a></span>
<span class="normal"><a href="#__codelineno-0-575"> 575</a></span>
<span class="normal"><a href="#__codelineno-0-576"> 576</a></span>
<span class="normal"><a href="#__codelineno-0-577"> 577</a></span>
<span class="normal"><a href="#__codelineno-0-578"> 578</a></span>
<span class="normal"><a href="#__codelineno-0-579"> 579</a></span>
<span class="normal"><a href="#__codelineno-0-580"> 580</a></span>
<span class="normal"><a href="#__codelineno-0-581"> 581</a></span>
<span class="normal"><a href="#__codelineno-0-582"> 582</a></span>
<span class="normal"><a href="#__codelineno-0-583"> 583</a></span>
<span class="normal"><a href="#__codelineno-0-584"> 584</a></span>
<span class="normal"><a href="#__codelineno-0-585"> 585</a></span>
<span class="normal"><a href="#__codelineno-0-586"> 586</a></span>
<span class="normal"><a href="#__codelineno-0-587"> 587</a></span>
<span class="normal"><a href="#__codelineno-0-588"> 588</a></span>
<span class="normal"><a href="#__codelineno-0-589"> 589</a></span>
<span class="normal"><a href="#__codelineno-0-590"> 590</a></span>
<span class="normal"><a href="#__codelineno-0-591"> 591</a></span>
<span class="normal"><a href="#__codelineno-0-592"> 592</a></span>
<span class="normal"><a href="#__codelineno-0-593"> 593</a></span>
<span class="normal"><a href="#__codelineno-0-594"> 594</a></span>
<span class="normal"><a href="#__codelineno-0-595"> 595</a></span>
<span class="normal"><a href="#__codelineno-0-596"> 596</a></span>
<span class="normal"><a href="#__codelineno-0-597"> 597</a></span>
<span class="normal"><a href="#__codelineno-0-598"> 598</a></span>
<span class="normal"><a href="#__codelineno-0-599"> 599</a></span>
<span class="normal"><a href="#__codelineno-0-600"> 600</a></span>
<span class="normal"><a href="#__codelineno-0-601"> 601</a></span>
<span class="normal"><a href="#__codelineno-0-602"> 602</a></span>
<span class="normal"><a href="#__codelineno-0-603"> 603</a></span>
<span class="normal"><a href="#__codelineno-0-604"> 604</a></span>
<span class="normal"><a href="#__codelineno-0-605"> 605</a></span>
<span class="normal"><a href="#__codelineno-0-606"> 606</a></span>
<span class="normal"><a href="#__codelineno-0-607"> 607</a></span>
<span class="normal"><a href="#__codelineno-0-608"> 608</a></span>
<span class="normal"><a href="#__codelineno-0-609"> 609</a></span>
<span class="normal"><a href="#__codelineno-0-610"> 610</a></span>
<span class="normal"><a href="#__codelineno-0-611"> 611</a></span>
<span class="normal"><a href="#__codelineno-0-612"> 612</a></span>
<span class="normal"><a href="#__codelineno-0-613"> 613</a></span>
<span class="normal"><a href="#__codelineno-0-614"> 614</a></span>
<span class="normal"><a href="#__codelineno-0-615"> 615</a></span>
<span class="normal"><a href="#__codelineno-0-616"> 616</a></span>
<span class="normal"><a href="#__codelineno-0-617"> 617</a></span>
<span class="normal"><a href="#__codelineno-0-618"> 618</a></span>
<span class="normal"><a href="#__codelineno-0-619"> 619</a></span>
<span class="normal"><a href="#__codelineno-0-620"> 620</a></span>
<span class="normal"><a href="#__codelineno-0-621"> 621</a></span>
<span class="normal"><a href="#__codelineno-0-622"> 622</a></span>
<span class="normal"><a href="#__codelineno-0-623"> 623</a></span>
<span class="normal"><a href="#__codelineno-0-624"> 624</a></span>
<span class="normal"><a href="#__codelineno-0-625"> 625</a></span>
<span class="normal"><a href="#__codelineno-0-626"> 626</a></span>
<span class="normal"><a href="#__codelineno-0-627"> 627</a></span>
<span class="normal"><a href="#__codelineno-0-628"> 628</a></span>
<span class="normal"><a href="#__codelineno-0-629"> 629</a></span>
<span class="normal"><a href="#__codelineno-0-630"> 630</a></span>
<span class="normal"><a href="#__codelineno-0-631"> 631</a></span>
<span class="normal"><a href="#__codelineno-0-632"> 632</a></span>
<span class="normal"><a href="#__codelineno-0-633"> 633</a></span>
<span class="normal"><a href="#__codelineno-0-634"> 634</a></span>
<span class="normal"><a href="#__codelineno-0-635"> 635</a></span>
<span class="normal"><a href="#__codelineno-0-636"> 636</a></span>
<span class="normal"><a href="#__codelineno-0-637"> 637</a></span>
<span class="normal"><a href="#__codelineno-0-638"> 638</a></span>
<span class="normal"><a href="#__codelineno-0-639"> 639</a></span>
<span class="normal"><a href="#__codelineno-0-640"> 640</a></span>
<span class="normal"><a href="#__codelineno-0-641"> 641</a></span>
<span class="normal"><a href="#__codelineno-0-642"> 642</a></span>
<span class="normal"><a href="#__codelineno-0-643"> 643</a></span>
<span class="normal"><a href="#__codelineno-0-644"> 644</a></span>
<span class="normal"><a href="#__codelineno-0-645"> 645</a></span>
<span class="normal"><a href="#__codelineno-0-646"> 646</a></span>
<span class="normal"><a href="#__codelineno-0-647"> 647</a></span>
<span class="normal"><a href="#__codelineno-0-648"> 648</a></span>
<span class="normal"><a href="#__codelineno-0-649"> 649</a></span>
<span class="normal"><a href="#__codelineno-0-650"> 650</a></span>
<span class="normal"><a href="#__codelineno-0-651"> 651</a></span>
<span class="normal"><a href="#__codelineno-0-652"> 652</a></span>
<span class="normal"><a href="#__codelineno-0-653"> 653</a></span>
<span class="normal"><a href="#__codelineno-0-654"> 654</a></span>
<span class="normal"><a href="#__codelineno-0-655"> 655</a></span>
<span class="normal"><a href="#__codelineno-0-656"> 656</a></span>
<span class="normal"><a href="#__codelineno-0-657"> 657</a></span>
<span class="normal"><a href="#__codelineno-0-658"> 658</a></span>
<span class="normal"><a href="#__codelineno-0-659"> 659</a></span>
<span class="normal"><a href="#__codelineno-0-660"> 660</a></span>
<span class="normal"><a href="#__codelineno-0-661"> 661</a></span>
<span class="normal"><a href="#__codelineno-0-662"> 662</a></span>
<span class="normal"><a href="#__codelineno-0-663"> 663</a></span>
<span class="normal"><a href="#__codelineno-0-664"> 664</a></span>
<span class="normal"><a href="#__codelineno-0-665"> 665</a></span>
<span class="normal"><a href="#__codelineno-0-666"> 666</a></span>
<span class="normal"><a href="#__codelineno-0-667"> 667</a></span>
<span class="normal"><a href="#__codelineno-0-668"> 668</a></span>
<span class="normal"><a href="#__codelineno-0-669"> 669</a></span>
<span class="normal"><a href="#__codelineno-0-670"> 670</a></span>
<span class="normal"><a href="#__codelineno-0-671"> 671</a></span>
<span class="normal"><a href="#__codelineno-0-672"> 672</a></span>
<span class="normal"><a href="#__codelineno-0-673"> 673</a></span>
<span class="normal"><a href="#__codelineno-0-674"> 674</a></span>
<span class="normal"><a href="#__codelineno-0-675"> 675</a></span>
<span class="normal"><a href="#__codelineno-0-676"> 676</a></span>
<span class="normal"><a href="#__codelineno-0-677"> 677</a></span>
<span class="normal"><a href="#__codelineno-0-678"> 678</a></span>
<span class="normal"><a href="#__codelineno-0-679"> 679</a></span>
<span class="normal"><a href="#__codelineno-0-680"> 680</a></span>
<span class="normal"><a href="#__codelineno-0-681"> 681</a></span>
<span class="normal"><a href="#__codelineno-0-682"> 682</a></span>
<span class="normal"><a href="#__codelineno-0-683"> 683</a></span>
<span class="normal"><a href="#__codelineno-0-684"> 684</a></span>
<span class="normal"><a href="#__codelineno-0-685"> 685</a></span>
<span class="normal"><a href="#__codelineno-0-686"> 686</a></span>
<span class="normal"><a href="#__codelineno-0-687"> 687</a></span>
<span class="normal"><a href="#__codelineno-0-688"> 688</a></span>
<span class="normal"><a href="#__codelineno-0-689"> 689</a></span>
<span class="normal"><a href="#__codelineno-0-690"> 690</a></span>
<span class="normal"><a href="#__codelineno-0-691"> 691</a></span>
<span class="normal"><a href="#__codelineno-0-692"> 692</a></span>
<span class="normal"><a href="#__codelineno-0-693"> 693</a></span>
<span class="normal"><a href="#__codelineno-0-694"> 694</a></span>
<span class="normal"><a href="#__codelineno-0-695"> 695</a></span>
<span class="normal"><a href="#__codelineno-0-696"> 696</a></span>
<span class="normal"><a href="#__codelineno-0-697"> 697</a></span>
<span class="normal"><a href="#__codelineno-0-698"> 698</a></span>
<span class="normal"><a href="#__codelineno-0-699"> 699</a></span>
<span class="normal"><a href="#__codelineno-0-700"> 700</a></span>
<span class="normal"><a href="#__codelineno-0-701"> 701</a></span>
<span class="normal"><a href="#__codelineno-0-702"> 702</a></span>
<span class="normal"><a href="#__codelineno-0-703"> 703</a></span>
<span class="normal"><a href="#__codelineno-0-704"> 704</a></span>
<span class="normal"><a href="#__codelineno-0-705"> 705</a></span>
<span class="normal"><a href="#__codelineno-0-706"> 706</a></span>
<span class="normal"><a href="#__codelineno-0-707"> 707</a></span>
<span class="normal"><a href="#__codelineno-0-708"> 708</a></span>
<span class="normal"><a href="#__codelineno-0-709"> 709</a></span>
<span class="normal"><a href="#__codelineno-0-710"> 710</a></span>
<span class="normal"><a href="#__codelineno-0-711"> 711</a></span>
<span class="normal"><a href="#__codelineno-0-712"> 712</a></span>
<span class="normal"><a href="#__codelineno-0-713"> 713</a></span>
<span class="normal"><a href="#__codelineno-0-714"> 714</a></span>
<span class="normal"><a href="#__codelineno-0-715"> 715</a></span>
<span class="normal"><a href="#__codelineno-0-716"> 716</a></span>
<span class="normal"><a href="#__codelineno-0-717"> 717</a></span>
<span class="normal"><a href="#__codelineno-0-718"> 718</a></span>
<span class="normal"><a href="#__codelineno-0-719"> 719</a></span>
<span class="normal"><a href="#__codelineno-0-720"> 720</a></span>
<span class="normal"><a href="#__codelineno-0-721"> 721</a></span>
<span class="normal"><a href="#__codelineno-0-722"> 722</a></span>
<span class="normal"><a href="#__codelineno-0-723"> 723</a></span>
<span class="normal"><a href="#__codelineno-0-724"> 724</a></span>
<span class="normal"><a href="#__codelineno-0-725"> 725</a></span>
<span class="normal"><a href="#__codelineno-0-726"> 726</a></span>
<span class="normal"><a href="#__codelineno-0-727"> 727</a></span>
<span class="normal"><a href="#__codelineno-0-728"> 728</a></span>
<span class="normal"><a href="#__codelineno-0-729"> 729</a></span>
<span class="normal"><a href="#__codelineno-0-730"> 730</a></span>
<span class="normal"><a href="#__codelineno-0-731"> 731</a></span>
<span class="normal"><a href="#__codelineno-0-732"> 732</a></span>
<span class="normal"><a href="#__codelineno-0-733"> 733</a></span>
<span class="normal"><a href="#__codelineno-0-734"> 734</a></span>
<span class="normal"><a href="#__codelineno-0-735"> 735</a></span>
<span class="normal"><a href="#__codelineno-0-736"> 736</a></span>
<span class="normal"><a href="#__codelineno-0-737"> 737</a></span>
<span class="normal"><a href="#__codelineno-0-738"> 738</a></span>
<span class="normal"><a href="#__codelineno-0-739"> 739</a></span>
<span class="normal"><a href="#__codelineno-0-740"> 740</a></span>
<span class="normal"><a href="#__codelineno-0-741"> 741</a></span>
<span class="normal"><a href="#__codelineno-0-742"> 742</a></span>
<span class="normal"><a href="#__codelineno-0-743"> 743</a></span>
<span class="normal"><a href="#__codelineno-0-744"> 744</a></span>
<span class="normal"><a href="#__codelineno-0-745"> 745</a></span>
<span class="normal"><a href="#__codelineno-0-746"> 746</a></span>
<span class="normal"><a href="#__codelineno-0-747"> 747</a></span>
<span class="normal"><a href="#__codelineno-0-748"> 748</a></span>
<span class="normal"><a href="#__codelineno-0-749"> 749</a></span>
<span class="normal"><a href="#__codelineno-0-750"> 750</a></span>
<span class="normal"><a href="#__codelineno-0-751"> 751</a></span>
<span class="normal"><a href="#__codelineno-0-752"> 752</a></span>
<span class="normal"><a href="#__codelineno-0-753"> 753</a></span>
<span class="normal"><a href="#__codelineno-0-754"> 754</a></span>
<span class="normal"><a href="#__codelineno-0-755"> 755</a></span>
<span class="normal"><a href="#__codelineno-0-756"> 756</a></span>
<span class="normal"><a href="#__codelineno-0-757"> 757</a></span>
<span class="normal"><a href="#__codelineno-0-758"> 758</a></span>
<span class="normal"><a href="#__codelineno-0-759"> 759</a></span>
<span class="normal"><a href="#__codelineno-0-760"> 760</a></span>
<span class="normal"><a href="#__codelineno-0-761"> 761</a></span>
<span class="normal"><a href="#__codelineno-0-762"> 762</a></span>
<span class="normal"><a href="#__codelineno-0-763"> 763</a></span>
<span class="normal"><a href="#__codelineno-0-764"> 764</a></span>
<span class="normal"><a href="#__codelineno-0-765"> 765</a></span>
<span class="normal"><a href="#__codelineno-0-766"> 766</a></span>
<span class="normal"><a href="#__codelineno-0-767"> 767</a></span>
<span class="normal"><a href="#__codelineno-0-768"> 768</a></span>
<span class="normal"><a href="#__codelineno-0-769"> 769</a></span>
<span class="normal"><a href="#__codelineno-0-770"> 770</a></span>
<span class="normal"><a href="#__codelineno-0-771"> 771</a></span>
<span class="normal"><a href="#__codelineno-0-772"> 772</a></span>
<span class="normal"><a href="#__codelineno-0-773"> 773</a></span>
<span class="normal"><a href="#__codelineno-0-774"> 774</a></span>
<span class="normal"><a href="#__codelineno-0-775"> 775</a></span>
<span class="normal"><a href="#__codelineno-0-776"> 776</a></span>
<span class="normal"><a href="#__codelineno-0-777"> 777</a></span>
<span class="normal"><a href="#__codelineno-0-778"> 778</a></span>
<span class="normal"><a href="#__codelineno-0-779"> 779</a></span>
<span class="normal"><a href="#__codelineno-0-780"> 780</a></span>
<span class="normal"><a href="#__codelineno-0-781"> 781</a></span>
<span class="normal"><a href="#__codelineno-0-782"> 782</a></span>
<span class="normal"><a href="#__codelineno-0-783"> 783</a></span>
<span class="normal"><a href="#__codelineno-0-784"> 784</a></span>
<span class="normal"><a href="#__codelineno-0-785"> 785</a></span>
<span class="normal"><a href="#__codelineno-0-786"> 786</a></span>
<span class="normal"><a href="#__codelineno-0-787"> 787</a></span>
<span class="normal"><a href="#__codelineno-0-788"> 788</a></span>
<span class="normal"><a href="#__codelineno-0-789"> 789</a></span>
<span class="normal"><a href="#__codelineno-0-790"> 790</a></span>
<span class="normal"><a href="#__codelineno-0-791"> 791</a></span>
<span class="normal"><a href="#__codelineno-0-792"> 792</a></span>
<span class="normal"><a href="#__codelineno-0-793"> 793</a></span>
<span class="normal"><a href="#__codelineno-0-794"> 794</a></span>
<span class="normal"><a href="#__codelineno-0-795"> 795</a></span>
<span class="normal"><a href="#__codelineno-0-796"> 796</a></span>
<span class="normal"><a href="#__codelineno-0-797"> 797</a></span>
<span class="normal"><a href="#__codelineno-0-798"> 798</a></span>
<span class="normal"><a href="#__codelineno-0-799"> 799</a></span>
<span class="normal"><a href="#__codelineno-0-800"> 800</a></span>
<span class="normal"><a href="#__codelineno-0-801"> 801</a></span>
<span class="normal"><a href="#__codelineno-0-802"> 802</a></span>
<span class="normal"><a href="#__codelineno-0-803"> 803</a></span>
<span class="normal"><a href="#__codelineno-0-804"> 804</a></span>
<span class="normal"><a href="#__codelineno-0-805"> 805</a></span>
<span class="normal"><a href="#__codelineno-0-806"> 806</a></span>
<span class="normal"><a href="#__codelineno-0-807"> 807</a></span>
<span class="normal"><a href="#__codelineno-0-808"> 808</a></span>
<span class="normal"><a href="#__codelineno-0-809"> 809</a></span>
<span class="normal"><a href="#__codelineno-0-810"> 810</a></span>
<span class="normal"><a href="#__codelineno-0-811"> 811</a></span>
<span class="normal"><a href="#__codelineno-0-812"> 812</a></span>
<span class="normal"><a href="#__codelineno-0-813"> 813</a></span>
<span class="normal"><a href="#__codelineno-0-814"> 814</a></span>
<span class="normal"><a href="#__codelineno-0-815"> 815</a></span>
<span class="normal"><a href="#__codelineno-0-816"> 816</a></span>
<span class="normal"><a href="#__codelineno-0-817"> 817</a></span>
<span class="normal"><a href="#__codelineno-0-818"> 818</a></span>
<span class="normal"><a href="#__codelineno-0-819"> 819</a></span>
<span class="normal"><a href="#__codelineno-0-820"> 820</a></span>
<span class="normal"><a href="#__codelineno-0-821"> 821</a></span>
<span class="normal"><a href="#__codelineno-0-822"> 822</a></span>
<span class="normal"><a href="#__codelineno-0-823"> 823</a></span>
<span class="normal"><a href="#__codelineno-0-824"> 824</a></span>
<span class="normal"><a href="#__codelineno-0-825"> 825</a></span>
<span class="normal"><a href="#__codelineno-0-826"> 826</a></span>
<span class="normal"><a href="#__codelineno-0-827"> 827</a></span>
<span class="normal"><a href="#__codelineno-0-828"> 828</a></span>
<span class="normal"><a href="#__codelineno-0-829"> 829</a></span>
<span class="normal"><a href="#__codelineno-0-830"> 830</a></span>
<span class="normal"><a href="#__codelineno-0-831"> 831</a></span>
<span class="normal"><a href="#__codelineno-0-832"> 832</a></span>
<span class="normal"><a href="#__codelineno-0-833"> 833</a></span>
<span class="normal"><a href="#__codelineno-0-834"> 834</a></span>
<span class="normal"><a href="#__codelineno-0-835"> 835</a></span>
<span class="normal"><a href="#__codelineno-0-836"> 836</a></span>
<span class="normal"><a href="#__codelineno-0-837"> 837</a></span>
<span class="normal"><a href="#__codelineno-0-838"> 838</a></span>
<span class="normal"><a href="#__codelineno-0-839"> 839</a></span>
<span class="normal"><a href="#__codelineno-0-840"> 840</a></span>
<span class="normal"><a href="#__codelineno-0-841"> 841</a></span>
<span class="normal"><a href="#__codelineno-0-842"> 842</a></span>
<span class="normal"><a href="#__codelineno-0-843"> 843</a></span>
<span class="normal"><a href="#__codelineno-0-844"> 844</a></span>
<span class="normal"><a href="#__codelineno-0-845"> 845</a></span>
<span class="normal"><a href="#__codelineno-0-846"> 846</a></span>
<span class="normal"><a href="#__codelineno-0-847"> 847</a></span>
<span class="normal"><a href="#__codelineno-0-848"> 848</a></span>
<span class="normal"><a href="#__codelineno-0-849"> 849</a></span>
<span class="normal"><a href="#__codelineno-0-850"> 850</a></span>
<span class="normal"><a href="#__codelineno-0-851"> 851</a></span>
<span class="normal"><a href="#__codelineno-0-852"> 852</a></span>
<span class="normal"><a href="#__codelineno-0-853"> 853</a></span>
<span class="normal"><a href="#__codelineno-0-854"> 854</a></span>
<span class="normal"><a href="#__codelineno-0-855"> 855</a></span>
<span class="normal"><a href="#__codelineno-0-856"> 856</a></span>
<span class="normal"><a href="#__codelineno-0-857"> 857</a></span>
<span class="normal"><a href="#__codelineno-0-858"> 858</a></span>
<span class="normal"><a href="#__codelineno-0-859"> 859</a></span>
<span class="normal"><a href="#__codelineno-0-860"> 860</a></span>
<span class="normal"><a href="#__codelineno-0-861"> 861</a></span>
<span class="normal"><a href="#__codelineno-0-862"> 862</a></span>
<span class="normal"><a href="#__codelineno-0-863"> 863</a></span>
<span class="normal"><a href="#__codelineno-0-864"> 864</a></span>
<span class="normal"><a href="#__codelineno-0-865"> 865</a></span>
<span class="normal"><a href="#__codelineno-0-866"> 866</a></span>
<span class="normal"><a href="#__codelineno-0-867"> 867</a></span>
<span class="normal"><a href="#__codelineno-0-868"> 868</a></span>
<span class="normal"><a href="#__codelineno-0-869"> 869</a></span>
<span class="normal"><a href="#__codelineno-0-870"> 870</a></span>
<span class="normal"><a href="#__codelineno-0-871"> 871</a></span>
<span class="normal"><a href="#__codelineno-0-872"> 872</a></span>
<span class="normal"><a href="#__codelineno-0-873"> 873</a></span>
<span class="normal"><a href="#__codelineno-0-874"> 874</a></span>
<span class="normal"><a href="#__codelineno-0-875"> 875</a></span>
<span class="normal"><a href="#__codelineno-0-876"> 876</a></span>
<span class="normal"><a href="#__codelineno-0-877"> 877</a></span>
<span class="normal"><a href="#__codelineno-0-878"> 878</a></span>
<span class="normal"><a href="#__codelineno-0-879"> 879</a></span>
<span class="normal"><a href="#__codelineno-0-880"> 880</a></span>
<span class="normal"><a href="#__codelineno-0-881"> 881</a></span>
<span class="normal"><a href="#__codelineno-0-882"> 882</a></span>
<span class="normal"><a href="#__codelineno-0-883"> 883</a></span>
<span class="normal"><a href="#__codelineno-0-884"> 884</a></span>
<span class="normal"><a href="#__codelineno-0-885"> 885</a></span>
<span class="normal"><a href="#__codelineno-0-886"> 886</a></span>
<span class="normal"><a href="#__codelineno-0-887"> 887</a></span>
<span class="normal"><a href="#__codelineno-0-888"> 888</a></span>
<span class="normal"><a href="#__codelineno-0-889"> 889</a></span>
<span class="normal"><a href="#__codelineno-0-890"> 890</a></span>
<span class="normal"><a href="#__codelineno-0-891"> 891</a></span>
<span class="normal"><a href="#__codelineno-0-892"> 892</a></span>
<span class="normal"><a href="#__codelineno-0-893"> 893</a></span>
<span class="normal"><a href="#__codelineno-0-894"> 894</a></span>
<span class="normal"><a href="#__codelineno-0-895"> 895</a></span>
<span class="normal"><a href="#__codelineno-0-896"> 896</a></span>
<span class="normal"><a href="#__codelineno-0-897"> 897</a></span>
<span class="normal"><a href="#__codelineno-0-898"> 898</a></span>
<span class="normal"><a href="#__codelineno-0-899"> 899</a></span>
<span class="normal"><a href="#__codelineno-0-900"> 900</a></span>
<span class="normal"><a href="#__codelineno-0-901"> 901</a></span>
<span class="normal"><a href="#__codelineno-0-902"> 902</a></span>
<span class="normal"><a href="#__codelineno-0-903"> 903</a></span>
<span class="normal"><a href="#__codelineno-0-904"> 904</a></span>
<span class="normal"><a href="#__codelineno-0-905"> 905</a></span>
<span class="normal"><a href="#__codelineno-0-906"> 906</a></span>
<span class="normal"><a href="#__codelineno-0-907"> 907</a></span>
<span class="normal"><a href="#__codelineno-0-908"> 908</a></span>
<span class="normal"><a href="#__codelineno-0-909"> 909</a></span>
<span class="normal"><a href="#__codelineno-0-910"> 910</a></span>
<span class="normal"><a href="#__codelineno-0-911"> 911</a></span>
<span class="normal"><a href="#__codelineno-0-912"> 912</a></span>
<span class="normal"><a href="#__codelineno-0-913"> 913</a></span>
<span class="normal"><a href="#__codelineno-0-914"> 914</a></span>
<span class="normal"><a href="#__codelineno-0-915"> 915</a></span>
<span class="normal"><a href="#__codelineno-0-916"> 916</a></span>
<span class="normal"><a href="#__codelineno-0-917"> 917</a></span>
<span class="normal"><a href="#__codelineno-0-918"> 918</a></span>
<span class="normal"><a href="#__codelineno-0-919"> 919</a></span>
<span class="normal"><a href="#__codelineno-0-920"> 920</a></span>
<span class="normal"><a href="#__codelineno-0-921"> 921</a></span>
<span class="normal"><a href="#__codelineno-0-922"> 922</a></span>
<span class="normal"><a href="#__codelineno-0-923"> 923</a></span>
<span class="normal"><a href="#__codelineno-0-924"> 924</a></span>
<span class="normal"><a href="#__codelineno-0-925"> 925</a></span>
<span class="normal"><a href="#__codelineno-0-926"> 926</a></span>
<span class="normal"><a href="#__codelineno-0-927"> 927</a></span>
<span class="normal"><a href="#__codelineno-0-928"> 928</a></span>
<span class="normal"><a href="#__codelineno-0-929"> 929</a></span>
<span class="normal"><a href="#__codelineno-0-930"> 930</a></span>
<span class="normal"><a href="#__codelineno-0-931"> 931</a></span>
<span class="normal"><a href="#__codelineno-0-932"> 932</a></span>
<span class="normal"><a href="#__codelineno-0-933"> 933</a></span>
<span class="normal"><a href="#__codelineno-0-934"> 934</a></span>
<span class="normal"><a href="#__codelineno-0-935"> 935</a></span>
<span class="normal"><a href="#__codelineno-0-936"> 936</a></span>
<span class="normal"><a href="#__codelineno-0-937"> 937</a></span>
<span class="normal"><a href="#__codelineno-0-938"> 938</a></span>
<span class="normal"><a href="#__codelineno-0-939"> 939</a></span>
<span class="normal"><a href="#__codelineno-0-940"> 940</a></span>
<span class="normal"><a href="#__codelineno-0-941"> 941</a></span>
<span class="normal"><a href="#__codelineno-0-942"> 942</a></span>
<span class="normal"><a href="#__codelineno-0-943"> 943</a></span>
<span class="normal"><a href="#__codelineno-0-944"> 944</a></span>
<span class="normal"><a href="#__codelineno-0-945"> 945</a></span>
<span class="normal"><a href="#__codelineno-0-946"> 946</a></span>
<span class="normal"><a href="#__codelineno-0-947"> 947</a></span>
<span class="normal"><a href="#__codelineno-0-948"> 948</a></span>
<span class="normal"><a href="#__codelineno-0-949"> 949</a></span>
<span class="normal"><a href="#__codelineno-0-950"> 950</a></span>
<span class="normal"><a href="#__codelineno-0-951"> 951</a></span>
<span class="normal"><a href="#__codelineno-0-952"> 952</a></span>
<span class="normal"><a href="#__codelineno-0-953"> 953</a></span>
<span class="normal"><a href="#__codelineno-0-954"> 954</a></span>
<span class="normal"><a href="#__codelineno-0-955"> 955</a></span>
<span class="normal"><a href="#__codelineno-0-956"> 956</a></span>
<span class="normal"><a href="#__codelineno-0-957"> 957</a></span>
<span class="normal"><a href="#__codelineno-0-958"> 958</a></span>
<span class="normal"><a href="#__codelineno-0-959"> 959</a></span>
<span class="normal"><a href="#__codelineno-0-960"> 960</a></span>
<span class="normal"><a href="#__codelineno-0-961"> 961</a></span>
<span class="normal"><a href="#__codelineno-0-962"> 962</a></span>
<span class="normal"><a href="#__codelineno-0-963"> 963</a></span>
<span class="normal"><a href="#__codelineno-0-964"> 964</a></span>
<span class="normal"><a href="#__codelineno-0-965"> 965</a></span>
<span class="normal"><a href="#__codelineno-0-966"> 966</a></span>
<span class="normal"><a href="#__codelineno-0-967"> 967</a></span>
<span class="normal"><a href="#__codelineno-0-968"> 968</a></span>
<span class="normal"><a href="#__codelineno-0-969"> 969</a></span>
<span class="normal"><a href="#__codelineno-0-970"> 970</a></span>
<span class="normal"><a href="#__codelineno-0-971"> 971</a></span>
<span class="normal"><a href="#__codelineno-0-972"> 972</a></span>
<span class="normal"><a href="#__codelineno-0-973"> 973</a></span>
<span class="normal"><a href="#__codelineno-0-974"> 974</a></span>
<span class="normal"><a href="#__codelineno-0-975"> 975</a></span>
<span class="normal"><a href="#__codelineno-0-976"> 976</a></span>
<span class="normal"><a href="#__codelineno-0-977"> 977</a></span>
<span class="normal"><a href="#__codelineno-0-978"> 978</a></span>
<span class="normal"><a href="#__codelineno-0-979"> 979</a></span>
<span class="normal"><a href="#__codelineno-0-980"> 980</a></span>
<span class="normal"><a href="#__codelineno-0-981"> 981</a></span>
<span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="k">class</span><span class="w"> </span><span class="nc">Relation</span><span class="p">:</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Used as a base class for the classes generated by</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="sd">    `Model.get_relation_class &lt;#half_orm.model.Model.get_relation_class&gt;`_.</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">        **kwargs: the arguments names must correspond to the columns names of the relation.</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">        UnknownAttributeError: If the name of an argument doesn&#39;t match a column name in the</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">            relation considered.</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">        You can generate a class for any relation in your database:</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">            &gt;&gt;&gt; from half_orm.model import Model</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">            &gt;&gt;&gt; model = Model(&#39;halftest&#39;)</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">            &gt;&gt;&gt; class Person(model.get_relation_class(&#39;actor.person&#39;)):</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">            &gt;&gt;&gt;     # your code</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">        To define a set of data in your relation at instantiation:</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">            &gt;&gt;&gt; gaston = Person(last_name=&#39;Lagaffe&#39;, first_name=&#39;Gaston&#39;)</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">            &gt;&gt;&gt; all_names_starting_with_la = Person(last_name=(&#39;ilike&#39;, &#39;la%&#39;))</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">        Or to constrain an instantiated object via its\</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">            `Fields &lt;#half_orm.field.Field&gt;`_:</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="sd">            &gt;&gt;&gt; person = Person()</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">            &gt;&gt;&gt; person.birth_date = (&#39;&gt;&#39;, &#39;1970-01-01&#39;)</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">        Raises an `UnknownAttributeError &lt;#half_orm.relation_errors.UnknownAttributeError&gt;`_:</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">            &gt;&gt;&gt; Person(lost_name=&#39;Lagaffe&#39;)</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">            [...]UnknownAttributeError: ERROR! Unknown attribute: {&#39;lost_name&#39;}.</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>    <span class="n">_ho_fields_aliases</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="n">_rels_ids</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="n">_fqrn</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The names of the arguments must correspond to the names of the columns in the relation.</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="n">module</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="nb">globals</span><span class="p">(),</span> <span class="nb">locals</span><span class="p">(),</span> <span class="p">[</span><span class="s1">&#39;FKEYS_PROPERTIES&#39;</span><span class="p">,</span> <span class="s1">&#39;FKEYS&#39;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>        <span class="c1">#TODO: remove in release 1.0.0</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;FKEYS_PROPERTIES&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;FKEYS&#39;</span><span class="p">):</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>            <span class="n">mod_fkeys</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">bold</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s1">&#39;.FKEYS&#39;</span><span class="p">)</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>            <span class="n">err</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span><span class="si">{</span><span class="n">mod_fkeys</span><span class="si">}</span><span class="s1"> variable is no longer supported!</span><span class="se">\n</span><span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>            <span class="n">err</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;&#39;&#39;</span><span class="se">\t</span><span class="s1">Use the &quot;</span><span class="si">{</span><span class="n">utils</span><span class="o">.</span><span class="n">Color</span><span class="o">.</span><span class="n">bold</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;.Fkeys&#39;</span><span class="p">)</span><span class="si">}</span><span class="s1">&quot;&#39;&#39;&#39;</span> <span class="o">+</span> \
<a id="__codelineno-0-261" name="__codelineno-0-261"></a><span class="w">                </span><span class="sd">&#39;&#39;&#39; class attribute instead.\n&#39;&#39;&#39;</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>            <span class="k">raise</span> <span class="ne">DeprecationWarning</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fk_loop</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_pkey</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_ukeys</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys_attr</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_is_singleton</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_only</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_fields</span><span class="p">()</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_fkeys</span><span class="p">()</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span> <span class="o">=</span> <span class="n">_SetOperators</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_id_cast</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_mogrify</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>        <span class="n">_</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>            <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_isfrozen</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ho_check_colums</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>        <span class="s2">&quot;Check that the args are actual columns of the relation&quot;</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="n">elt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span class="k">if</span> <span class="n">columns</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">!=</span> <span class="n">columns</span><span class="p">:</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>            <span class="n">diff</span> <span class="o">=</span> <span class="n">columns</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>            <span class="k">raise</span> <span class="n">relation_errors</span><span class="o">.</span><span class="n">UnknownAttributeError</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">elt</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">args</span> <span class="k">if</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">diff</span><span class="p">]))</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;[dict]&#39;</span><span class="p">:</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert a new tuple into the Relation.</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">            [dict]: A singleton containing the data inserted.</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">            &gt;&gt;&gt; gaston = Person(last_name=&#39;La&#39;, first_name=&#39;Ga&#39;, birth_date=&#39;1970-01-01&#39;).ho_insert()</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">            &gt;&gt;&gt; print(gaston)</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">            {&#39;id&#39;: 1772, &#39;first_name&#39;: &#39;Ga&#39;, &#39;last_name&#39;: &#39;La&#39;, &#39;birth_date&#39;: datetime.date(1970, 1, 1)}</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">            It is not possible to insert more than one row with the insert method</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">args</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>        <span class="n">query_template</span> <span class="o">=</span> <span class="s2">&quot;insert into </span><span class="si">{}</span><span class="s2"> (</span><span class="si">{}</span><span class="s2">) values (</span><span class="si">{}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="s1">&#39;insert&#39;</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>        <span class="n">fields_names</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">fk_fields</span><span class="p">,</span> <span class="n">fk_query</span><span class="p">,</span> <span class="n">fk_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__what</span><span class="p">()</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>        <span class="n">what_to_insert</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">))]</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="k">if</span> <span class="n">fk_fields</span><span class="p">:</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>            <span class="n">fields_names</span> <span class="o">+=</span> <span class="n">fk_fields</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>            <span class="n">what_to_insert</span> <span class="o">+=</span> <span class="n">fk_query</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>            <span class="n">values</span> <span class="o">+=</span> <span class="n">fk_values</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>        <span class="n">query</span> <span class="o">=</span> <span class="n">query_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_qrn</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fields_names</span><span class="p">),</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">what_to_insert</span><span class="p">))</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>        <span class="n">returning</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">or</span> <span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>        <span class="k">if</span> <span class="n">returning</span><span class="p">:</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>            <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_add_returning</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="o">*</span><span class="n">returning</span><span class="p">)</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>            <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span> <span class="ow">or</span> <span class="p">[{}]</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>            <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the set of values correponding to the constraint attached to the object.</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">        This method is a generator.</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">        Arguments:</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">            *args: the fields names of the returned attributes. If omitted,</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">                all the fields are returned.</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">        Yields:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">            the result of the query as a dictionary.</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">            &gt;&gt;&gt; for person in Person(last_name=(&#39;like&#39;, &#39;La%&#39;)).ho_select(&#39;id&#39;):</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">            &gt;&gt;&gt;     print(person)</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="sd">            {&#39;id&#39;: 1772}</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>        <span class="n">query</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_prep_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>            <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>                <span class="k">yield</span> <span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;Relation&#39;</span><span class="p">:</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The get method allows you to fetch a singleton from the database.</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">        It garantees that the constraint references one and only one tuple.</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">            args (List[str]): list of fields names.\</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">            If ommitted, all the values of the row retreived from the database\</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="sd">            are set for the self object.\</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">            Otherwise, only the values listed in the `args` parameter are set.</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">            Relation: the object retreived from the database.</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">            ExpectedOneError: an exception is raised if no or more than one element is found.</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="sd">            &gt;&gt;&gt; gaston = Person(last_name=&#39;Lagaffe&#39;, first_name=&#39;Gaston&#39;).ho_get()</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a><span class="sd">            &gt;&gt;&gt; type(gaston) is Person</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a><span class="sd">            True</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">            &gt;&gt;&gt; gaston.id</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">            (int4) NOT NULL (id = 1772)</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="sd">            &gt;&gt;&gt; str(gaston.id)</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="sd">            &#39;1772&#39;</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">            &gt;&gt;&gt; gaston.id.value</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">            1772</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ho_limit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>        <span class="n">_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_count</span><span class="p">()</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>        <span class="k">if</span> <span class="n">_count</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>            <span class="k">raise</span> <span class="n">relation_errors</span><span class="o">.</span><span class="n">ExpectedOneError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_count</span><span class="p">)</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_is_singleton</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>        <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="p">(</span><span class="o">**</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))))</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>        <span class="n">ret</span><span class="o">.</span><span class="n">_ho_is_singleton</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>        <span class="k">return</span> <span class="n">ret</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__fkey_where</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">fk_fields</span><span class="p">,</span> <span class="n">fk_query</span><span class="p">,</span> <span class="n">fk_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__what</span><span class="p">()</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>        <span class="k">if</span> <span class="n">fk_fields</span><span class="p">:</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>            <span class="n">fk_where</span> <span class="o">=</span> <span class="s2">&quot; and &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">a</span><span class="si">}</span><span class="s2">) in (</span><span class="si">{</span><span class="n">b</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fk_fields</span><span class="p">,</span> <span class="n">fk_query</span><span class="p">)])</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>            <span class="k">if</span> <span class="n">fk_where</span><span class="p">:</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>                <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">fk_where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>            <span class="n">values</span> <span class="o">+=</span> <span class="n">fk_values</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>        <span class="k">return</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">update_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">        kwargs represents the values to be updated {[field name:value]}</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">        The object self must be set unless update_all is True.</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">        The constraints of self are updated with kwargs.</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_is_set</span><span class="p">()</span> <span class="ow">or</span> <span class="n">update_all</span><span class="p">):</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>                <span class="sa">f</span><span class="s1">&#39;Attempt to update all rows of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>                <span class="s1">&#39; without update_all being set to True!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">args</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>        <span class="n">update_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">update_args</span><span class="p">:</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>            <span class="k">return</span> <span class="kc">None</span> <span class="c1"># no new value update. Should we raise an error here?</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>        <span class="n">query_template</span> <span class="o">=</span> <span class="s2">&quot;update </span><span class="si">{}</span><span class="s2"> set </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>        <span class="n">what</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__update_args</span><span class="p">(</span><span class="o">**</span><span class="n">update_args</span><span class="p">)</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>        <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fkey_where</span><span class="p">(</span><span class="n">where</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>        <span class="n">query</span> <span class="o">=</span> <span class="n">query_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_qrn</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">where</span><span class="p">)</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>            <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_add_returning</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>            <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">update_args</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>            <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>                <span class="k">return</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">delete_all</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes a set of tuples from the relation.</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">        To empty the relation, delete_all must be set to True.</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>        <span class="n">_</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">args</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_is_set</span><span class="p">()</span> <span class="ow">or</span> <span class="n">delete_all</span><span class="p">):</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>                <span class="sa">f</span><span class="s1">&#39;Attempt to delete all rows from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>                <span class="s1">&#39; without delete_all being set to True!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>        <span class="n">query_template</span> <span class="o">=</span> <span class="s2">&quot;delete from </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prep_query</span><span class="p">(</span><span class="n">query_template</span><span class="p">)</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="s1">&#39;delete&#39;</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__where_args</span><span class="p">()</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>        <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fkey_where</span><span class="p">(</span><span class="n">where</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>        <span class="k">if</span> <span class="n">where</span><span class="p">:</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>            <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; where </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>        <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;delete from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_qrn</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>            <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_add_returning</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>            <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>                <span class="k">return</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ho_add_returning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>        <span class="s2">&quot;Adds the SQL returning clause to the query&quot;</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>            <span class="n">returning</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1"> returning </span><span class="si">{</span><span class="n">returning</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>        <span class="k">return</span> <span class="n">query</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_unfreeze</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>        <span class="s2">&quot;Allow to add attributs to a relation&quot;</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_isfrozen</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_freeze</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>        <span class="s2">&quot;set _ho_isfrozen to True.&quot;</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_isfrozen</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets an attribute as long as _ho_isfrozen is False</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">        The foreign keys properties are not detected by hasattr</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">        hence the line `_ = self.__dict__[key]` to double check if</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="sd">        the attribute is really present.</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_ho_isfrozen&#39;</span><span class="p">):</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_ho_isfrozen&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_isfrozen</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>            <span class="k">raise</span> <span class="n">relation_errors</span><span class="o">.</span><span class="n">IsFrozenError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">Field</span><span class="p">):</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>            <span class="k">return</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="o">.</span><span class="n">execute_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_mogrify</span><span class="p">)</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the _ho_id_cast or the id of the relation.</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_id_cast</span> <span class="ow">or</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_only</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>        <span class="s2">&quot;Returns the value of self._ho_only&quot;</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_only</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>    <span class="nd">@ho_only</span><span class="o">.</span><span class="n">setter</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_only</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the value of self._ho_only. Restrict the values of a query to</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a><span class="sd">        the elements of the relation (no inherited values).</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}:</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1"> is not a bool!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_only</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__py_field_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">field_num</span><span class="p">):</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>        <span class="n">py_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields_aliases</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a>        <span class="n">error</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">check_attribute_name</span><span class="p">(</span><span class="n">py_name</span><span class="p">)</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>        <span class="k">if</span> <span class="n">error</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>            <span class="n">utils</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s1">&#39;HALFORM&#39;</span><span class="p">)</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;column</span><span class="si">{</span><span class="n">field_num</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>        <span class="k">return</span> <span class="n">py_name</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ho_set_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialise the fields of the relation.&quot;&quot;&quot;</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>        <span class="n">_fields_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="o">.</span><span class="n">_fields_metadata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t_fqrn</span><span class="p">)</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">f_metadata</span> <span class="ow">in</span> <span class="n">_fields_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>            <span class="n">field</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">f_metadata</span><span class="p">)</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>            <span class="n">field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__py_field_name</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">f_metadata</span><span class="p">[</span><span class="s1">&#39;fieldnum&#39;</span><span class="p">])</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">_is_part_of_pk</span><span class="p">():</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_ho_pkey</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">_is_unique</span><span class="p">():</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_ho_ukeys</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ho_set_fkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialisation of the foreign keys of the relation&quot;&quot;&quot;</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>        <span class="c1">#pylint: disable=import-outside-toplevel</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">half_orm.fkey</span><span class="w"> </span><span class="kn">import</span> <span class="n">FKey</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>        <span class="n">_fkeys_metadata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="o">.</span><span class="n">_fkeys_metadata</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t_fqrn</span><span class="p">)</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>        <span class="k">for</span> <span class="n">fkeyname</span><span class="p">,</span> <span class="n">f_metadata</span> <span class="ow">in</span> <span class="n">_fkeys_metadata</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span><span class="p">[</span><span class="n">fkeyname</span><span class="p">]</span> <span class="o">=</span> <span class="n">FKey</span><span class="p">(</span><span class="n">fkeyname</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">f_metadata</span><span class="p">)</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="s1">&#39;Fkeys&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys_properties</span><span class="p">:</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fkeys</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>                <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>                    <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span> <span class="c1"># we skip empty keys</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a>                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span><span class="p">[</span><span class="n">value</span><span class="p">])</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys_attr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>                <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">exp</span><span class="p">:</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>                    <span class="k">raise</span> <span class="n">relation_errors</span><span class="o">.</span><span class="n">WrongFkeyError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exp</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys_properties</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ho_dataclass_name</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>        <span class="n">database</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">relation</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_t_fqrn</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>        <span class="n">schemaname</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">elt</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">schema</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)])</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>        <span class="n">relationname</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">elt</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">relation</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)])</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;DC_</span><span class="si">{</span><span class="n">schemaname</span><span class="si">}{</span><span class="n">relationname</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a dictionary containing only the values of the fields</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">        that are set.&quot;&quot;&quot;</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="n">field</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()}</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>            <span class="k">yield</span> <span class="n">key</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__to_dict_val_comp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a dictionary containing the values and comparators of the fields</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="sd">        that are set.&quot;&quot;&quot;</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>        <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:(</span><span class="n">field</span><span class="o">.</span><span class="n">_comp</span><span class="p">(),</span> <span class="n">field</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()}</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>        <span class="n">fkeys_usage</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="se">\</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a><span class="s2">To use the foreign keys as direct attributes of the class, copy/paste the Fkeys below into</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a><span class="s2">your code as a class attribute and replace the empty string key(s) with the alias(es) you</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a><span class="s2">want to use. The aliases must be unique and different from any of the column names. Empty</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a><span class="s2">string keys are ignored.</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a><span class="s2">Fkeys = {&quot;&quot;&quot;</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>        <span class="n">rel_kind</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_kind</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>        <span class="n">database</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">relation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_fqrn</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>        <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DATABASE: </span><span class="si">{</span><span class="n">database</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>        <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SCHEMA: </span><span class="si">{</span><span class="n">schema</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>        <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rel_kind</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">relation</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_metadata</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]:</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DESCRIPTION:</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_metadata</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>        <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;FIELDS:&#39;</span><span class="p">)</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>        <span class="n">mx_fld_n_len</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>            <span class="n">mx_fld_n_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">mx_fld_n_len</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">field_name</span><span class="p">))</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>            <span class="n">field_desc</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;- </span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">mx_fld_n_len</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="n">field_name</span><span class="p">))</span><span class="si">}{</span><span class="nb">repr</span><span class="p">(</span><span class="n">field</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>            <span class="n">error</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">check_attribute_name</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>            <span class="k">if</span> <span class="n">error</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields_aliases</span><span class="p">:</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>                <span class="n">field_desc</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">field_desc</span><span class="si">}</span><span class="s1"> --- FIX ME! </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field_desc</span><span class="p">)</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>        <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>        <span class="n">pkey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="o">.</span><span class="n">_pkey_constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t_fqrn</span><span class="p">)</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>        <span class="k">if</span> <span class="n">pkey</span><span class="p">:</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PRIMARY KEY (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pkey</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>        <span class="k">for</span> <span class="n">uniq</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="o">.</span><span class="n">_unique_constraints_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_t_fqrn</span><span class="p">):</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UNIQUE CONSTRAINT (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">uniq</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a>            <span class="n">plur</span> <span class="o">=</span> <span class="s1">&#39;S&#39;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;FOREIGN KEY</span><span class="si">{</span><span class="n">plur</span><span class="si">}</span><span class="s1">:&#39;</span><span class="p">)</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a>            <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a>                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">fkey</span><span class="p">))</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a>            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Fkeys&#39;</span><span class="p">):</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fkeys_usage</span><span class="p">)</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>                <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span><span class="p">:</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a>                    <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    &#39;&#39;: &#39;</span><span class="si">{</span><span class="n">fkey</span><span class="si">}</span><span class="s2">&#39;,&quot;</span><span class="p">)</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a>                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Fkeys = {&quot;</span><span class="p">)</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Fkeys</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>                    <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;: &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39;,&quot;</span><span class="p">)</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>            <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">)</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_is_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if one field at least is set or if self has been</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="sd">        constrained by at least one of its foreign keys or self is the</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="sd">        result of a combination of Relations (using set operators).</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>        <span class="n">joined_to</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">jt_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>            <span class="n">jt_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">jt_</span><span class="p">)</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>            <span class="k">if</span> <span class="n">jt_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fk_loop</span><span class="p">:</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t set Fkey on the same object&quot;</span><span class="p">)</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fk_loop</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">jt_id</span><span class="p">)</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>            <span class="n">joined_to</span> <span class="o">|=</span> <span class="n">jt_</span><span class="o">.</span><span class="n">ho_is_set</span><span class="p">()</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fk_loop</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>        <span class="k">return</span> <span class="p">(</span><span class="n">joined_to</span> <span class="ow">or</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span><span class="p">)</span> <span class="ow">or</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>                <span class="nb">bool</span><span class="p">({</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()}))</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__get_set_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns a list containing only the fields that are set.&quot;&quot;&quot;</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>        <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()]</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__walk_op</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rel_id_</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_fields_</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Walk the set operators tree and return a list of SQL where</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">        representation of the query with a list of the fields of the query.</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>            <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>            <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span><span class="p">:</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span><span class="p">:</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;not (&quot;</span><span class="p">)</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>            <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">left</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>            <span class="n">left</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>            <span class="n">left</span><span class="o">.</span><span class="n">__walk_op</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">_fields_</span><span class="p">)</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span><span class="si">}</span><span class="se">\n</span><span class="s2">    &quot;</span><span class="p">)</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>                <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">right</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>                <span class="n">right</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>                <span class="n">right</span><span class="o">.</span><span class="n">__walk_op</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">_fields_</span><span class="p">)</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span><span class="p">:</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__where_repr</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">))</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>            <span class="n">_fields_</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_set_fields</span><span class="p">()</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>        <span class="k">return</span> <span class="n">out</span><span class="p">,</span> <span class="n">_fields_</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ho_sql_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the FQRN as alias for the sql query.&quot;&quot;&quot;</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_qrn</span><span class="si">}</span><span class="s2"> as r</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_id</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__get_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orig_rel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">deja_vu</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructs the _ho_sql_query and gets the _ho_sql_values for self.&quot;&quot;&quot;</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a>        <span class="k">if</span> <span class="n">deja_vu</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>            <span class="n">orig_rel</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_id</span><span class="p">()]</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a>            <span class="n">deja_vu</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_id</span><span class="p">:[(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]}</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a>        <span class="k">for</span> <span class="n">fkey</span><span class="p">,</span> <span class="n">fk_rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a>            <span class="n">fk_rel</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_query_type</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>            <span class="k">if</span> <span class="n">fk_rel</span><span class="o">.</span><span class="n">ho_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deja_vu</span><span class="p">:</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>                <span class="n">deja_vu</span><span class="p">[</span><span class="n">fk_rel</span><span class="o">.</span><span class="n">ho_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>            <span class="c1"># elif (fk_rel, fkey) in deja_vu[fk_rel.ho_id] or fk_rel is orig_rel:</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>            <span class="c1">#     #sys.stderr.write(f&quot;déjà vu in from! {fk_rel._fqrn}\n&quot;)</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>            <span class="c1">#     continue</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>            <span class="n">fk_rel</span><span class="o">.</span><span class="n">__get_from</span><span class="p">(</span><span class="n">orig_rel</span><span class="p">,</span> <span class="n">deja_vu</span><span class="p">)</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>            <span class="n">deja_vu</span><span class="p">[</span><span class="n">fk_rel</span><span class="o">.</span><span class="n">ho_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">fk_rel</span><span class="p">,</span> <span class="n">fkey</span><span class="p">))</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>            <span class="n">_</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">fk_rel</span><span class="o">.</span><span class="n">__where_args</span><span class="p">()</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>            <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; and</span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>            <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  join </span><span class="si">{</span><span class="n">fk_rel</span><span class="o">.</span><span class="n">_ho_sql_id</span><span class="p">()</span><span class="si">}</span><span class="s1"> on</span><span class="se">\n</span><span class="s1">   &#39;</span><span class="p">)</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>            <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">fkey</span><span class="o">.</span><span class="n">_join_query</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>            <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">where</span><span class="p">)</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>            <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_sql_values</span> <span class="o">+=</span> <span class="n">values</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__where_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rel_id_</span><span class="p">):</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a>        <span class="n">where_repr</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_set_fields</span><span class="p">():</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>            <span class="n">where_repr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">_where_repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span><span class="p">,</span> <span class="n">rel_id_</span><span class="p">))</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a>        <span class="n">where_repr</span> <span class="o">=</span> <span class="s1">&#39; and &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">where_repr</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;1 = 1&#39;</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a>        <span class="n">ret</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">where_repr</span><span class="si">}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span><span class="p">:</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a>            <span class="n">ret</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;not (</span><span class="si">{</span><span class="n">ret</span><span class="si">}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>        <span class="k">return</span> <span class="n">ret</span>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__where_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the what, where and values needed to construct the queries.</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>        <span class="n">rel_id_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_id</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>        <span class="n">what</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;r</span><span class="si">{</span><span class="n">rel_id_</span><span class="si">}</span><span class="s1">.*&#39;</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>            <span class="n">what</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;r</span><span class="si">{</span><span class="n">rel_id_</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a>        <span class="n">s_where</span><span class="p">,</span> <span class="n">set_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__walk_op</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">)</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>        <span class="n">s_where</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s_where</span><span class="p">)</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>        <span class="k">return</span> <span class="n">what</span><span class="p">,</span> <span class="n">s_where</span><span class="p">,</span> <span class="n">set_fields</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__prep_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_template</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare the SQL query to be executed.&quot;&quot;&quot;</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>        <span class="kn">from</span><span class="w"> </span><span class="nn">half_orm.fkey</span><span class="w"> </span><span class="kn">import</span> <span class="n">FKey</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="s1">&#39;select&#39;</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>        <span class="n">what</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__where_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>        <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">where</span><span class="se">\n</span><span class="s2">    </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__get_from</span><span class="p">()</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a>        <span class="c1"># remove duplicates</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a>        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">elt</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="p">))):</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>            <span class="k">if</span> <span class="n">elt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  join &#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;  and</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>        <span class="c1"># check that fkeys are fkeys</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a>        <span class="k">for</span> <span class="n">fkey_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys_attr</span><span class="p">:</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>            <span class="n">fkey_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">fkey_name</span><span class="p">]</span><span class="o">.</span><span class="vm">__class__</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a>            <span class="k">if</span> <span class="n">fkey_cls</span> <span class="o">!=</span> <span class="n">FKey</span><span class="p">:</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>                    <span class="sa">f</span><span class="s1">&#39;self.</span><span class="si">{</span><span class="n">fkey_name</span><span class="si">}</span><span class="s1"> is not a FKey (got a </span><span class="si">{</span><span class="n">fkey_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> object instead).</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>                    <span class="sa">f</span><span class="s1">&#39;- use: self.</span><span class="si">{</span><span class="n">fkey_name</span><span class="si">}</span><span class="s1">.set(</span><span class="si">{</span><span class="n">fkey_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">(...))</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>                    <span class="sa">f</span><span class="s1">&#39;- not: self.</span><span class="si">{</span><span class="n">fkey_name</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">fkey_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">(...)&#39;</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a>                    <span class="p">)</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a>        <span class="k">return</span> <span class="p">(</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>            <span class="n">query_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a>                <span class="n">what</span><span class="p">,</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_ho_only</span> <span class="ow">and</span> <span class="s2">&quot;only&quot;</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>                <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="p">),</span> <span class="n">where</span><span class="p">),</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>            <span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_ho_prep_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>        <span class="n">distinct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;distinct&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>        <span class="n">query_template</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;select</span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">distinct</span><span class="si">}</span><span class="s2"> </span><span class="se">{{}}\n</span><span class="s2">from</span><span class="se">\n</span><span class="s2">  </span><span class="se">{{}}</span><span class="s2"> </span><span class="se">{{}}\n</span><span class="s2">  </span><span class="se">{{}}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>        <span class="n">query</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prep_query</span><span class="p">(</span><span class="n">query_template</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a>        <span class="n">values</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_values</span> <span class="o">+</span> <span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a>        <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">:</span>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a>            <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2"> order by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;order_by&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a>        <span class="k">if</span> <span class="s1">&#39;limit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">:</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a>            <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2"> limit </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a>        <span class="k">if</span> <span class="s1">&#39;offset&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">:</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a>            <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2"> offset </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a>        <span class="k">return</span> <span class="n">query</span><span class="p">,</span> <span class="n">values</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_distinct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set distinct in SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a>        <span class="n">distinct</span> <span class="o">=</span> <span class="s1">&#39;distinct&#39;</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a>        <span class="k">if</span> <span class="n">dist</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}:</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;ho_distinct argument must be either True or False!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>        <span class="k">if</span> <span class="n">dist</span> <span class="ow">in</span> <span class="p">{</span><span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">}:</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a>            <span class="n">distinct</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;distinct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distinct</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_unaccent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">fields_names</span><span class="p">):</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>        <span class="s2">&quot;Sets unaccent for each field listed in fields_names&quot;</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a>        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">fields_names</span><span class="p">:</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="n">Field</span><span class="p">):</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s1"> is not a Field!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a>            <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">unaccent</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_order_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_order_</span><span class="p">):</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set SQL order by according to the &quot;order&quot; string passed</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a><span class="sd">        @order string example :</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a><span class="sd">        &quot;field1, field2 desc, field3, field4 desc&quot;</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;order_by&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_order_</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_limit_</span><span class="p">):</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set limit for the next SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>        <span class="k">if</span> <span class="n">_limit_</span><span class="p">:</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_limit_</span><span class="p">)</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>        <span class="k">elif</span> <span class="s1">&#39;limit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">:</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span><span class="p">)</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_offset_</span><span class="p">):</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the offset for the next SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_offset_</span><span class="p">)</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_mogrify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prints the select query.&quot;&quot;&quot;</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_mogrify</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>    <span class="c1"># @utils.trace</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the number of tuples matching the intention in the relation.</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query</span> <span class="o">=</span> <span class="s2">&quot;select&quot;</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>        <span class="n">query</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_prep_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>        <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;select</span><span class="se">\n</span><span class="s1">  count(*) from (</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">) as ho_count&#39;</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if the relation is empty, False otherwise.</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ho_limit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__update_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the what, where an values for the update query.&quot;&quot;&quot;</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>        <span class="n">what_fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>        <span class="n">new_values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="s1">&#39;update&#39;</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__where_args</span><span class="p">()</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>        <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; where </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">new_value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>            <span class="n">what_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>            <span class="n">new_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>        <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">elt</span><span class="si">}</span><span class="s1">&quot; = %s&#39;</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">what_fields</span><span class="p">])</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>        <span class="k">return</span> <span class="n">what</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">new_values</span> <span class="o">+</span> <span class="n">values</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>    <span class="c1">#@utils.trace</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__what</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the constrained fields and foreign keys.</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>        <span class="n">set_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_set_fields</span><span class="p">()</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>        <span class="n">fields_names</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>            <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot;&#39;</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()]</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a>        <span class="n">fk_fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>        <span class="n">fk_queries</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>        <span class="n">fk_values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>        <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>            <span class="n">fk_prep_select</span> <span class="o">=</span> <span class="n">fkey</span><span class="o">.</span><span class="n">_fkey_prep_select</span><span class="p">()</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a>            <span class="k">if</span> <span class="n">fk_prep_select</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a>                <span class="n">fk_values</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fkey</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a>                <span class="n">fk_fields</span> <span class="o">+=</span> <span class="n">fk_prep_select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a>                <span class="n">fk_queries</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fk_values</span><span class="p">))]</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a>        <span class="k">return</span> <span class="n">fields_names</span><span class="p">,</span> <span class="n">set_fields</span><span class="p">,</span> <span class="n">fk_fields</span><span class="p">,</span> <span class="n">fk_queries</span><span class="p">,</span> <span class="n">fk_values</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>    <span class="nd">@classmethod</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_description</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the description (comment) of the relation</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a>        <span class="n">description</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_ho_metadata</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a>        <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>            <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a>        <span class="k">return</span> <span class="n">description</span> <span class="ow">or</span> <span class="s1">&#39;No description available&#39;</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">ho_cast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qrn</span><span class="p">):</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cast a relation into another relation.</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">        TODO: check that qrn inherits self (or is inherited by self)?</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a>        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="o">.</span><span class="n">_import_class</span><span class="p">(</span><span class="n">qrn</span><span class="p">)(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">__to_dict_val_comp</span><span class="p">())</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a>        <span class="n">new</span><span class="o">.</span><span class="n">_ho_id_cast</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a>        <span class="n">new</span><span class="o">.</span><span class="n">_ho_join_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a>        <span class="n">new</span><span class="o">.</span><span class="n">_ho_set_operators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a>        <span class="k">return</span> <span class="n">new</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__set__op__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Si l&#39;opérateur du self est déjà défini, il faut aller modifier</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">        l&#39;opérateur du right ???</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">        On crée un nouvel objet sans contrainte et on a left et right et opérateur</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>        <span class="k">def</span><span class="w"> </span><span class="nf">check_fk</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">jt_list</span><span class="p">):</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="w">            </span><span class="sd">&quot;&quot;&quot;Sets the _ho_join_to dictionary for the new relation.</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="sd">            &quot;&quot;&quot;</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>            <span class="k">for</span> <span class="n">fkey</span><span class="p">,</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">jt_list</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>                <span class="k">if</span> <span class="n">rel</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a>                    <span class="n">rel</span> <span class="o">=</span> <span class="n">new</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a>                <span class="n">new</span><span class="o">.</span><span class="n">_ho_join_to</span><span class="p">[</span><span class="n">fkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">rel</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a>        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">__to_dict_val_comp</span><span class="p">())</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a>        <span class="n">new</span><span class="o">.</span><span class="n">_ho_id_cast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_id_cast</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a>        <span class="k">if</span> <span class="n">operator</span><span class="p">:</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a>            <span class="n">new</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>            <span class="n">new</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">operator</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a>        <span class="n">dct_join</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a>        <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>            <span class="n">new</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a>            <span class="n">dct_join</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">right</span><span class="o">.</span><span class="n">_ho_join_to</span><span class="p">)</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a>        <span class="n">check_fk</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">dct_join</span><span class="p">)</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>        <span class="k">return</span> <span class="n">new</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set__op__</span><span class="p">(</span><span class="s2">&quot;and&quot;</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__iand__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>        <span class="bp">self</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">&amp;</span> <span class="n">right</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set__op__</span><span class="p">(</span><span class="s2">&quot;or&quot;</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__ior__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a>        <span class="bp">self</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">|</span> <span class="n">right</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set__op__</span><span class="p">(</span><span class="s2">&quot;and not&quot;</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a>        <span class="bp">self</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">right</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a>        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__set__op__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a>        <span class="n">new</span><span class="o">.</span><span class="n">_ho_neg</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a>        <span class="k">return</span> <span class="n">new</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__xor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span> <span class="o">|</span> <span class="n">right</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span> <span class="o">&amp;</span> <span class="n">right</span><span class="p">)</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__ixor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>        <span class="bp">self</span> <span class="o">=</span> <span class="bp">self</span> <span class="o">^</span> <span class="n">right</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a>        <span class="k">return</span> <span class="p">(</span><span class="n">right</span> <span class="o">-</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">ho_count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>        <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">right</span><span class="p">):</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a>        <span class="k">return</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">right</span> <span class="ow">and</span> <span class="n">right</span> <span class="ow">in</span> <span class="bp">self</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Context management entry</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a><span class="sd">        Returns self in a transaction context.</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a><span class="sd">        Example usage:</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a><span class="sd">        with relation as rel:</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a><span class="sd">            rel.ho_update(col=new_val)</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="sd">        Equivalent to (in a transaction context):</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="sd">        rel = relation.ho_select()</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="sd">        for elt in rel:</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="sd">            new_elt = relation(**elt)</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="sd">            new_elt.ho_update(col=new_val)</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ho_transaction</span><span class="o">.</span><span class="n">_enter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="p">)</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a>        <span class="k">return</span> <span class="bp">self</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">__</span><span class="p">):</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Context management exit</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ho_transaction</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="p">)</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a>        <span class="n">query</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_prep_select</span><span class="p">()</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a>        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a>            <span class="k">yield</span> <span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_select</span><span class="p">())</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a>    <span class="c1"># deprecated. To remove with release 1.0.0</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_insert</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">update_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_update</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">update_all</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">delete_all</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_delete</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">delete_all</span><span class="p">)</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">unaccent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">fields_names</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_unaccent</span><span class="p">(</span><span class="o">*</span><span class="n">fields_names</span><span class="p">)</span>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">order_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_order_</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_order_by</span><span class="p">(</span><span class="n">_order_</span><span class="p">)</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_limit_</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_limit</span><span class="p">(</span><span class="n">_limit_</span><span class="p">)</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_offset_</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_offset</span><span class="p">(</span><span class="n">_offset_</span><span class="p">)</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_mogrify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_mogrify</span><span class="p">()</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_count</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a>    <span class="nd">@utils</span><span class="o">.</span><span class="n">_ho_deprecated</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c1"># pragma: no cover</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_is_empty</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">





<h5 id="half_orm.relation.Relation-attributes">Attributes<a href="#half_orm.relation.Relation-attributes" class="headerlink" title="Permanent link">&para;</a></h5>

<div class="doc doc-object doc-attribute">



<h6 id="half_orm.relation.Relation.ho_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_id</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#half_orm.relation.Relation.ho_id" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Return the _ho_id_cast or the id of the relation.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h6 id="half_orm.relation.Relation.ho_only" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_only</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

<a href="#half_orm.relation.Relation.ho_only" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns the value of self._ho_only</p>

    </div>

</div>

<h5 id="half_orm.relation.Relation-functions">Functions<a href="#half_orm.relation.Relation-functions" class="headerlink" title="Permanent link">&para;</a></h5>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__enter__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__enter__</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.__enter__" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Context management entry</p>
<p>Returns self in a transaction context.</p>
<p>Example usage:
with relation as rel:
    rel.ho_update(col=new_val)</p>
<p>Equivalent to (in a transaction context):
rel = relation.ho_select()
for elt in rel:
    new_elt = relation(**elt)
    new_elt.ho_update(col=new_val)</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-945">945</a></span>
<span class="normal"><a href="#__codelineno-0-946">946</a></span>
<span class="normal"><a href="#__codelineno-0-947">947</a></span>
<span class="normal"><a href="#__codelineno-0-948">948</a></span>
<span class="normal"><a href="#__codelineno-0-949">949</a></span>
<span class="normal"><a href="#__codelineno-0-950">950</a></span>
<span class="normal"><a href="#__codelineno-0-951">951</a></span>
<span class="normal"><a href="#__codelineno-0-952">952</a></span>
<span class="normal"><a href="#__codelineno-0-953">953</a></span>
<span class="normal"><a href="#__codelineno-0-954">954</a></span>
<span class="normal"><a href="#__codelineno-0-955">955</a></span>
<span class="normal"><a href="#__codelineno-0-956">956</a></span>
<span class="normal"><a href="#__codelineno-0-957">957</a></span>
<span class="normal"><a href="#__codelineno-0-958">958</a></span>
<span class="normal"><a href="#__codelineno-0-959">959</a></span>
<span class="normal"><a href="#__codelineno-0-960">960</a></span>
<span class="normal"><a href="#__codelineno-0-961">961</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-945" name="__codelineno-0-945"></a><span class="k">def</span><span class="w"> </span><span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Context management entry</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a><span class="sd">    Returns self in a transaction context.</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a><span class="sd">    Example usage:</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a><span class="sd">    with relation as rel:</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a><span class="sd">        rel.ho_update(col=new_val)</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="sd">    Equivalent to (in a transaction context):</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a><span class="sd">    rel = relation.ho_select()</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="sd">    for elt in rel:</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="sd">        new_elt = relation(**elt)</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a><span class="sd">        new_elt.ho_update(col=new_val)</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">ho_transaction</span><span class="o">.</span><span class="n">_enter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="p">)</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__exit__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__exit__</span><span class="p">(</span><span class="o">*</span><span class="n">__</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.__exit__" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Context management exit</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-963">963</a></span>
<span class="normal"><a href="#__codelineno-0-964">964</a></span>
<span class="normal"><a href="#__codelineno-0-965">965</a></span>
<span class="normal"><a href="#__codelineno-0-966">966</a></span>
<span class="normal"><a href="#__codelineno-0-967">967</a></span>
<span class="normal"><a href="#__codelineno-0-968">968</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-963" name="__codelineno-0-963"></a><span class="k">def</span><span class="w"> </span><span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">__</span><span class="p">):</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Context management exit</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">ho_transaction</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="p">)</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__get_from" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__get_from</span><span class="p">(</span><span class="n">orig_rel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">deja_vu</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.__get_from" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Constructs the _ho_sql_query and gets the _ho_sql_values for self.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-683" name="__codelineno-0-683"></a><span class="k">def</span><span class="w"> </span><span class="nf">__get_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">orig_rel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">deja_vu</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Constructs the _ho_sql_query and gets the _ho_sql_values for self.&quot;&quot;&quot;</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a>    <span class="k">if</span> <span class="n">deja_vu</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>        <span class="n">orig_rel</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_id</span><span class="p">()]</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a>        <span class="n">deja_vu</span> <span class="o">=</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_id</span><span class="p">:[(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]}</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a>    <span class="k">for</span> <span class="n">fkey</span><span class="p">,</span> <span class="n">fk_rel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a>        <span class="n">fk_rel</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_query_type</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>        <span class="k">if</span> <span class="n">fk_rel</span><span class="o">.</span><span class="n">ho_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deja_vu</span><span class="p">:</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>            <span class="n">deja_vu</span><span class="p">[</span><span class="n">fk_rel</span><span class="o">.</span><span class="n">ho_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>        <span class="c1"># elif (fk_rel, fkey) in deja_vu[fk_rel.ho_id] or fk_rel is orig_rel:</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>        <span class="c1">#     #sys.stderr.write(f&quot;déjà vu in from! {fk_rel._fqrn}\n&quot;)</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>        <span class="c1">#     continue</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>        <span class="n">fk_rel</span><span class="o">.</span><span class="n">__get_from</span><span class="p">(</span><span class="n">orig_rel</span><span class="p">,</span> <span class="n">deja_vu</span><span class="p">)</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>        <span class="n">deja_vu</span><span class="p">[</span><span class="n">fk_rel</span><span class="o">.</span><span class="n">ho_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">fk_rel</span><span class="p">,</span> <span class="n">fkey</span><span class="p">))</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>        <span class="n">_</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">fk_rel</span><span class="o">.</span><span class="n">__where_args</span><span class="p">()</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>        <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; and</span><span class="se">\n</span><span class="s2"> </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>        <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  join </span><span class="si">{</span><span class="n">fk_rel</span><span class="o">.</span><span class="n">_ho_sql_id</span><span class="p">()</span><span class="si">}</span><span class="s1"> on</span><span class="se">\n</span><span class="s1">   &#39;</span><span class="p">)</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>        <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">fkey</span><span class="o">.</span><span class="n">_join_query</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>        <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">where</span><span class="p">)</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>        <span class="n">orig_rel</span><span class="o">.</span><span class="n">_ho_sql_values</span> <span class="o">+=</span> <span class="n">values</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__get_set_fields" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__get_set_fields</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.__get_set_fields" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns a list containing only the fields that are set.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="k">def</span><span class="w"> </span><span class="nf">__get_set_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a list containing only the fields that are set.&quot;&quot;&quot;</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__prep_query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__prep_query</span><span class="p">(</span><span class="n">query_template</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.__prep_query" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Prepare the SQL query to be executed.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-729" name="__codelineno-0-729"></a><span class="k">def</span><span class="w"> </span><span class="nf">__prep_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_template</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Prepare the SQL query to be executed.&quot;&quot;&quot;</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>    <span class="kn">from</span><span class="w"> </span><span class="nn">half_orm.fkey</span><span class="w"> </span><span class="kn">import</span> <span class="n">FKey</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="s1">&#39;select&#39;</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>    <span class="n">what</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__where_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>    <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">where</span><span class="se">\n</span><span class="s2">    </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">__get_from</span><span class="p">()</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a>    <span class="c1"># remove duplicates</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">elt</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="p">))):</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>        <span class="k">if</span> <span class="n">elt</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">  join &#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;  and</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>    <span class="c1"># check that fkeys are fkeys</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a>    <span class="k">for</span> <span class="n">fkey_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys_attr</span><span class="p">:</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>        <span class="n">fkey_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">fkey_name</span><span class="p">]</span><span class="o">.</span><span class="vm">__class__</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a>        <span class="k">if</span> <span class="n">fkey_cls</span> <span class="o">!=</span> <span class="n">FKey</span><span class="p">:</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>                <span class="sa">f</span><span class="s1">&#39;self.</span><span class="si">{</span><span class="n">fkey_name</span><span class="si">}</span><span class="s1"> is not a FKey (got a </span><span class="si">{</span><span class="n">fkey_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> object instead).</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>                <span class="sa">f</span><span class="s1">&#39;- use: self.</span><span class="si">{</span><span class="n">fkey_name</span><span class="si">}</span><span class="s1">.set(</span><span class="si">{</span><span class="n">fkey_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">(...))</span><span class="se">\n</span><span class="s1">&#39;</span>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>                <span class="sa">f</span><span class="s1">&#39;- not: self.</span><span class="si">{</span><span class="n">fkey_name</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">fkey_cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">(...)&#39;</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a>                <span class="p">)</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a>    <span class="k">return</span> <span class="p">(</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>        <span class="n">query_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a>            <span class="n">what</span><span class="p">,</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_only</span> <span class="ow">and</span> <span class="s2">&quot;only&quot;</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>            <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_sql_query</span><span class="p">),</span> <span class="n">where</span><span class="p">),</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>        <span class="n">values</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__set__op__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__set__op__</span><span class="p">(</span><span class="n">operator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.__set__op__" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Si l'opérateur du self est déjà défini, il faut aller modifier
l'opérateur du right ???
On crée un nouvel objet sans contrainte et on a left et right et opérateur</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="k">def</span><span class="w"> </span><span class="nf">__set__op__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operator</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Si l&#39;opérateur du self est déjà défini, il faut aller modifier</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">    l&#39;opérateur du right ???</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">    On crée un nouvel objet sans contrainte et on a left et right et opérateur</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">check_fk</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">jt_list</span><span class="p">):</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the _ho_join_to dictionary for the new relation.</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>        <span class="k">for</span> <span class="n">fkey</span><span class="p">,</span> <span class="n">rel</span> <span class="ow">in</span> <span class="n">jt_list</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a>            <span class="k">if</span> <span class="n">rel</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a>                <span class="n">rel</span> <span class="o">=</span> <span class="n">new</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a>            <span class="n">new</span><span class="o">.</span><span class="n">_ho_join_to</span><span class="p">[</span><span class="n">fkey</span><span class="p">]</span> <span class="o">=</span> <span class="n">rel</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a>    <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">__to_dict_val_comp</span><span class="p">())</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a>    <span class="n">new</span><span class="o">.</span><span class="n">_ho_id_cast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_id_cast</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a>    <span class="k">if</span> <span class="n">operator</span><span class="p">:</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a>        <span class="n">new</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="bp">self</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>        <span class="n">new</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">operator</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a>    <span class="n">dct_join</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a>    <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>        <span class="n">new</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a>        <span class="n">dct_join</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">right</span><span class="o">.</span><span class="n">_ho_join_to</span><span class="p">)</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a>    <span class="n">check_fk</span><span class="p">(</span><span class="n">new</span><span class="p">,</span> <span class="n">dct_join</span><span class="p">)</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>    <span class="k">return</span> <span class="n">new</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__setattr__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__setattr__</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.__setattr__" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Sets an attribute as long as _ho_isfrozen is False</p>
<p>The foreign keys properties are not detected by hasattr
hence the line <code>_ = self.__dict__[key]</code> to double check if
the attribute is really present.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="k">def</span><span class="w"> </span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets an attribute as long as _ho_isfrozen is False</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">    The foreign keys properties are not detected by hasattr</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">    hence the line `_ = self.__dict__[key]` to double check if</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="sd">    the attribute is really present.</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_ho_isfrozen&#39;</span><span class="p">):</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_ho_isfrozen&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_isfrozen</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>        <span class="k">raise</span> <span class="n">relation_errors</span><span class="o">.</span><span class="n">IsFrozenError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">Field</span><span class="p">):</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>        <span class="k">return</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>    <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__to_dict_val_comp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__to_dict_val_comp</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.__to_dict_val_comp" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns a dictionary containing the values and comparators of the fields
that are set.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-573" name="__codelineno-0-573"></a><span class="k">def</span><span class="w"> </span><span class="nf">__to_dict_val_comp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a dictionary containing the values and comparators of the fields</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a><span class="sd">    that are set.&quot;&quot;&quot;</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>    <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:(</span><span class="n">field</span><span class="o">.</span><span class="n">_comp</span><span class="p">(),</span> <span class="n">field</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__update_args" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__update_args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.__update_args" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns the what, where an values for the update query.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-832" name="__codelineno-0-832"></a><span class="k">def</span><span class="w"> </span><span class="nf">__update_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the what, where an values for the update query.&quot;&quot;&quot;</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>    <span class="n">what_fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>    <span class="n">new_values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="s1">&#39;update&#39;</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>    <span class="n">_</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__where_args</span><span class="p">()</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>    <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; where </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">new_value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>        <span class="n">what_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>        <span class="n">new_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>    <span class="n">what</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">elt</span><span class="si">}</span><span class="s1">&quot; = %s&#39;</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">what_fields</span><span class="p">])</span>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>    <span class="k">return</span> <span class="n">what</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">new_values</span> <span class="o">+</span> <span class="n">values</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__walk_op" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__walk_op</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_fields_</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.__walk_op" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Walk the set operators tree and return a list of SQL where
representation of the query with a list of the fields of the query.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-651" name="__codelineno-0-651"></a><span class="k">def</span><span class="w"> </span><span class="nf">__walk_op</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rel_id_</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_fields_</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Walk the set operators tree and return a list of SQL where</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a><span class="sd">    representation of the query with a list of the fields of the query.</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>    <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>        <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span><span class="p">:</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span><span class="p">:</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;not (&quot;</span><span class="p">)</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>        <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">left</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>        <span class="n">left</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>        <span class="n">left</span><span class="o">.</span><span class="n">__walk_op</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">_fields_</span><span class="p">)</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">right</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span><span class="si">}</span><span class="se">\n</span><span class="s2">    &quot;</span><span class="p">)</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>            <span class="n">right</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">right</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>            <span class="n">right</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>            <span class="n">right</span><span class="o">.</span><span class="n">__walk_op</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">_fields_</span><span class="p">)</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span><span class="p">:</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__where_repr</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">))</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>        <span class="n">_fields_</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_set_fields</span><span class="p">()</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>    <span class="k">return</span> <span class="n">out</span><span class="p">,</span> <span class="n">_fields_</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__what" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__what</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.__what" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns the constrained fields and foreign keys.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-846" name="__codelineno-0-846"></a><span class="k">def</span><span class="w"> </span><span class="nf">__what</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the constrained fields and foreign keys.</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>    <span class="n">set_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__get_set_fields</span><span class="p">()</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>    <span class="n">fields_names</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>        <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot;&#39;</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()]</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a>    <span class="n">fk_fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>    <span class="n">fk_queries</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>    <span class="n">fk_values</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>    <span class="k">for</span> <span class="n">fkey</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fkeys</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>        <span class="n">fk_prep_select</span> <span class="o">=</span> <span class="n">fkey</span><span class="o">.</span><span class="n">_fkey_prep_select</span><span class="p">()</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a>        <span class="k">if</span> <span class="n">fk_prep_select</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a>            <span class="n">fk_values</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fkey</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a>            <span class="n">fk_fields</span> <span class="o">+=</span> <span class="n">fk_prep_select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a>            <span class="n">fk_queries</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fk_values</span><span class="p">))]</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a>    <span class="k">return</span> <span class="n">fields_names</span><span class="p">,</span> <span class="n">set_fields</span><span class="p">,</span> <span class="n">fk_fields</span><span class="p">,</span> <span class="n">fk_queries</span><span class="p">,</span> <span class="n">fk_values</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.__where_args" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__where_args</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.__where_args" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns the what, where and values needed to construct the queries.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="k">def</span><span class="w"> </span><span class="nf">__where_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the what, where and values needed to construct the queries.</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>    <span class="n">rel_id_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_id</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>    <span class="n">what</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;r</span><span class="si">{</span><span class="n">rel_id_</span><span class="si">}</span><span class="s1">.*&#39;</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>    <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>        <span class="n">what</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;r</span><span class="si">{</span><span class="n">rel_id_</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">arg</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a>    <span class="n">s_where</span><span class="p">,</span> <span class="n">set_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__walk_op</span><span class="p">(</span><span class="n">rel_id_</span><span class="p">)</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>    <span class="n">s_where</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s_where</span><span class="p">)</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>    <span class="k">return</span> <span class="n">what</span><span class="p">,</span> <span class="n">s_where</span><span class="p">,</span> <span class="n">set_fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_cast" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_cast</span><span class="p">(</span><span class="n">qrn</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_cast" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Cast a relation into another relation.</p>
<p>TODO: check that qrn inherits self (or is inherited by self)?</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_cast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qrn</span><span class="p">):</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Cast a relation into another relation.</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="sd">    TODO: check that qrn inherits self (or is inherited by self)?</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a>    <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="o">.</span><span class="n">_import_class</span><span class="p">(</span><span class="n">qrn</span><span class="p">)(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">__to_dict_val_comp</span><span class="p">())</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a>    <span class="n">new</span><span class="o">.</span><span class="n">_ho_id_cast</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a>    <span class="n">new</span><span class="o">.</span><span class="n">_ho_join_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a>    <span class="n">new</span><span class="o">.</span><span class="n">_ho_set_operators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a>    <span class="k">return</span> <span class="n">new</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_count" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_count</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_count" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns the number of tuples matching the intention in the relation.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-817" name="__codelineno-0-817"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_count</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the number of tuples matching the intention in the relation.</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query</span> <span class="o">=</span> <span class="s2">&quot;select&quot;</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>    <span class="n">query</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_prep_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>    <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;select</span><span class="se">\n</span><span class="s1">  count(*) from (</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s1">) as ho_count&#39;</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_delete" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_delete</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">delete_all</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_delete" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Removes a set of tuples from the relation.
To empty the relation, delete_all must be set to True.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-433" name="__codelineno-0-433"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">delete_all</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes a set of tuples from the relation.</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">    To empty the relation, delete_all must be set to True.</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>    <span class="n">_</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">args</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_is_set</span><span class="p">()</span> <span class="ow">or</span> <span class="n">delete_all</span><span class="p">):</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>            <span class="sa">f</span><span class="s1">&#39;Attempt to delete all rows from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>            <span class="s1">&#39; without delete_all being set to True!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span class="n">query_template</span> <span class="o">=</span> <span class="s2">&quot;delete from </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>    <span class="n">_</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__prep_query</span><span class="p">(</span><span class="n">query_template</span><span class="p">)</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="s1">&#39;delete&#39;</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>    <span class="n">_</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__where_args</span><span class="p">()</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>    <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fkey_where</span><span class="p">(</span><span class="n">where</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>    <span class="k">if</span> <span class="n">where</span><span class="p">:</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>        <span class="n">where</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; where </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>    <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;delete from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_qrn</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">where</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>    <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_add_returning</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>            <span class="k">return</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_description" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_description</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#half_orm.relation.Relation.ho_description" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns the description (comment) of the relation</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-864" name="__codelineno-0-864"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_description</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the description (comment) of the relation</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a>    <span class="n">description</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_ho_metadata</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a>    <span class="k">if</span> <span class="n">description</span><span class="p">:</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>        <span class="n">description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a>    <span class="k">return</span> <span class="n">description</span> <span class="ow">or</span> <span class="s1">&#39;No description available&#39;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_dict</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.ho_dict" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns a dictionary containing only the values of the fields
that are set.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-558" name="__codelineno-0-558"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns a dictionary containing only the values of the fields</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a><span class="sd">    that are set.&quot;&quot;&quot;</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>    <span class="k">return</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span><span class="n">field</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_distinct" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_distinct</span><span class="p">(</span><span class="n">dist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_distinct" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Set distinct in SQL select request.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_distinct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set distinct in SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a>    <span class="n">distinct</span> <span class="o">=</span> <span class="s1">&#39;distinct&#39;</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a>    <span class="k">if</span> <span class="n">dist</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">{</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}:</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;ho_distinct argument must be either True or False!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>    <span class="k">if</span> <span class="n">dist</span> <span class="ow">in</span> <span class="p">{</span><span class="kc">False</span><span class="p">,</span> <span class="kc">None</span><span class="p">}:</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a>        <span class="n">distinct</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;distinct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distinct</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_freeze" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_freeze</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.ho_freeze" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>set _ho_isfrozen to True.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_freeze</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>    <span class="s2">&quot;set _ho_isfrozen to True.&quot;</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_isfrozen</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_get</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_get" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>The get method allows you to fetch a singleton from the database.
It garantees that the constraint references one and only one tuple.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of fields names.            If ommitted, all the values of the row retreived from the database            are set for the self object.            Otherwise, only the values listed in the <code>args</code> parameter are set.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Relation</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Relation (half_orm.relation.Relation)" href="#half_orm.relation.Relation">Relation</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the object retreived from the database.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ExpectedOneError">ExpectedOneError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>an exception is raised if no or more than one element is found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>gaston = Person(last_name='Lagaffe', first_name='Gaston').ho_get()
type(gaston) is Person
True
gaston.id
(int4) NOT NULL (id = 1772)
str(gaston.id)
'1772'
gaston.id.value
1772</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;Relation&#39;</span><span class="p">:</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The get method allows you to fetch a singleton from the database.</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">    It garantees that the constraint references one and only one tuple.</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">        args (List[str]): list of fields names.\</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">        If ommitted, all the values of the row retreived from the database\</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="sd">        are set for the self object.\</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">        Otherwise, only the values listed in the `args` parameter are set.</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">        Relation: the object retreived from the database.</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a><span class="sd">        ExpectedOneError: an exception is raised if no or more than one element is found.</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a><span class="sd">        &gt;&gt;&gt; gaston = Person(last_name=&#39;Lagaffe&#39;, first_name=&#39;Gaston&#39;).ho_get()</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a><span class="sd">        &gt;&gt;&gt; type(gaston) is Person</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a><span class="sd">        True</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="sd">        &gt;&gt;&gt; gaston.id</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="sd">        (int4) NOT NULL (id = 1772)</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="sd">        &gt;&gt;&gt; str(gaston.id)</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="sd">        &#39;1772&#39;</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">        &gt;&gt;&gt; gaston.id.value</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">        1772</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">ho_limit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>    <span class="n">_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_count</span><span class="p">()</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>    <span class="k">if</span> <span class="n">_count</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>        <span class="k">raise</span> <span class="n">relation_errors</span><span class="o">.</span><span class="n">ExpectedOneError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_count</span><span class="p">)</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_is_singleton</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>    <span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="p">(</span><span class="o">**</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))))</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>    <span class="n">ret</span><span class="o">.</span><span class="n">_ho_is_singleton</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_insert" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_insert</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_insert" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Insert a new tuple into the Relation.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>[<span title="dict">dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>[dict]: A singleton containing the data inserted.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p 1772_="1772," 1_="1)" _Ga_="'Ga'," _La_="'La'," _birth_date_:="'birth_date':" _first_name_:="'first_name':" _id_:="'id':" _last_name_:="'last_name':" datetime.date_1970_="datetime.date(1970,">gaston = Person(last_name='La', first_name='Ga', birth_date='1970-01-01').ho_insert()
print(gaston)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>It is not possible to insert more than one row with the insert method</p>
</details>

            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;[dict]&#39;</span><span class="p">:</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Insert a new tuple into the Relation.</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">        [dict]: A singleton containing the data inserted.</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">        &gt;&gt;&gt; gaston = Person(last_name=&#39;La&#39;, first_name=&#39;Ga&#39;, birth_date=&#39;1970-01-01&#39;).ho_insert()</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">        &gt;&gt;&gt; print(gaston)</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">        {&#39;id&#39;: 1772, &#39;first_name&#39;: &#39;Ga&#39;, &#39;last_name&#39;: &#39;La&#39;, &#39;birth_date&#39;: datetime.date(1970, 1, 1)}</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">        It is not possible to insert more than one row with the insert method</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>    <span class="n">_</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">args</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>    <span class="n">query_template</span> <span class="o">=</span> <span class="s2">&quot;insert into </span><span class="si">{}</span><span class="s2"> (</span><span class="si">{}</span><span class="s2">) values (</span><span class="si">{}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_query_type</span> <span class="o">=</span> <span class="s1">&#39;insert&#39;</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>    <span class="n">fields_names</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">fk_fields</span><span class="p">,</span> <span class="n">fk_query</span><span class="p">,</span> <span class="n">fk_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__what</span><span class="p">()</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>    <span class="n">what_to_insert</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">values</span><span class="p">))]</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>    <span class="k">if</span> <span class="n">fk_fields</span><span class="p">:</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>        <span class="n">fields_names</span> <span class="o">+=</span> <span class="n">fk_fields</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>        <span class="n">what_to_insert</span> <span class="o">+=</span> <span class="n">fk_query</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="n">values</span> <span class="o">+=</span> <span class="n">fk_values</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>    <span class="n">query</span> <span class="o">=</span> <span class="n">query_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_qrn</span><span class="p">,</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fields_names</span><span class="p">),</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">what_to_insert</span><span class="p">))</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>    <span class="n">returning</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">or</span> <span class="p">[</span><span class="s1">&#39;*&#39;</span><span class="p">]</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>    <span class="k">if</span> <span class="n">returning</span><span class="p">:</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_add_returning</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="o">*</span><span class="n">returning</span><span class="p">)</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>        <span class="n">res</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span> <span class="ow">or</span> <span class="p">[{}]</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>        <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_is_empty" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_is_empty</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.ho_is_empty" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Returns True if the relation is empty, False otherwise.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-825" name="__codelineno-0-825"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_is_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns True if the relation is empty, False otherwise.</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">ho_limit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_count</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_is_set" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_is_set</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.ho_is_set" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Return True if one field at least is set or if self has been
constrained by at least one of its foreign keys or self is the
result of a combination of Relations (using set operators).</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-630" name="__codelineno-0-630"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_is_set</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return True if one field at least is set or if self has been</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a><span class="sd">    constrained by at least one of its foreign keys or self is the</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="sd">    result of a combination of Relations (using set operators).</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>    <span class="n">joined_to</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">jt_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_join_to</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>        <span class="n">jt_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">jt_</span><span class="p">)</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>        <span class="k">if</span> <span class="n">jt_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fk_loop</span><span class="p">:</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Can&#39;t set Fkey on the same object&quot;</span><span class="p">)</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fk_loop</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">jt_id</span><span class="p">)</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>        <span class="n">joined_to</span> <span class="o">|=</span> <span class="n">jt_</span><span class="o">.</span><span class="n">ho_is_set</span><span class="p">()</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fk_loop</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">joined_to</span> <span class="ow">or</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_set_operators</span><span class="o">.</span><span class="n">operator</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_neg</span><span class="p">)</span> <span class="ow">or</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>            <span class="nb">bool</span><span class="p">({</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_set</span><span class="p">()}))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_limit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_limit</span><span class="p">(</span><span class="n">_limit_</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_limit" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Set limit for the next SQL select request.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-798" name="__codelineno-0-798"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_limit_</span><span class="p">):</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set limit for the next SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>    <span class="k">if</span> <span class="n">_limit_</span><span class="p">:</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;limit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_limit_</span><span class="p">)</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>    <span class="k">elif</span> <span class="s1">&#39;limit&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">:</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;limit&#39;</span><span class="p">)</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_mogrify" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_mogrify</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.ho_mogrify" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Prints the select query.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-811" name="__codelineno-0-811"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_mogrify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Prints the select query.&quot;&quot;&quot;</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_mogrify</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_offset" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_offset</span><span class="p">(</span><span class="n">_offset_</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_offset" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Set the offset for the next SQL select request.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-806" name="__codelineno-0-806"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_offset_</span><span class="p">):</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the offset for the next SQL select request.&quot;&quot;&quot;</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">_offset_</span><span class="p">)</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_order_by" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_order_by</span><span class="p">(</span><span class="n">_order_</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_order_by" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Set SQL order by according to the "order" string passed</p>
<p><a class="magiclink magiclink-github magiclink-mention" href="https://github.com/order" title="GitHub User: order">@order</a> string example :
"field1, field2 desc, field3, field4 desc"</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-789" name="__codelineno-0-789"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_order_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_order_</span><span class="p">):</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set SQL order by according to the &quot;order&quot; string passed</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a><span class="sd">    @order string example :</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a><span class="sd">    &quot;field1, field2 desc, field3, field4 desc&quot;</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_select_params</span><span class="p">[</span><span class="s1">&#39;order_by&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_order_</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_select" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_select" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Gets the set of values correponding to the constraint attached to the object.
This method is a generator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>*args</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the fields names of the returned attributes. If omitted,
all the fields are returned.</p>
              </div>
            </td>
            <td>
                  <code>()</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the result of the query as a dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p 1772="1772" _id_:="'id':">for person in Person(last_name=('like', 'La%')).ho_select('id'):
    print(person)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the set of values correponding to the constraint attached to the object.</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">    This method is a generator.</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">    Arguments:</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">        *args: the fields names of the returned attributes. If omitted,</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">            all the fields are returned.</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">    Yields:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">        the result of the query as a dictionary.</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">        &gt;&gt;&gt; for person in Person(last_name=(&#39;like&#39;, &#39;La%&#39;)).ho_select(&#39;id&#39;):</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">        &gt;&gt;&gt;     print(person)</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="sd">        {&#39;id&#39;: 1772}</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>    <span class="n">query</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_prep_select</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>        <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>            <span class="k">yield</span> <span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_unaccent" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_unaccent</span><span class="p">(</span><span class="o">*</span><span class="n">fields_names</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_unaccent" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Sets unaccent for each field listed in fields_names</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-781" name="__codelineno-0-781"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_unaccent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">fields_names</span><span class="p">):</span>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>    <span class="s2">&quot;Sets unaccent for each field listed in fields_names&quot;</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a>    <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">fields_names</span><span class="p">:</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="n">Field</span><span class="p">):</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s1"> is not a Field!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a>        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">unaccent</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_unfreeze" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_unfreeze</span><span class="p">()</span></code>

<a href="#half_orm.relation.Relation.ho_unfreeze" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>Allow to add attributs to a relation</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-464" name="__codelineno-0-464"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_unfreeze</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>    <span class="s2">&quot;Allow to add attributs to a relation&quot;</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_isfrozen</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="half_orm.relation.Relation.ho_update" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ho_update</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">update_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#half_orm.relation.Relation.ho_update" class="headerlink" title="Permanent link">&para;</a></h6>


    <div class="doc doc-contents ">

        <p>kwargs represents the values to be updated {[field name:value]}
The object self must be set unless update_all is True.
The constraints of self are updated with kwargs.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-402" name="__codelineno-0-402"></a><span class="k">def</span><span class="w"> </span><span class="nf">ho_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">update_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">    kwargs represents the values to be updated {[field name:value]}</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a><span class="sd">    The object self must be set unless update_all is True.</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">    The constraints of self are updated with kwargs.</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ho_is_set</span><span class="p">()</span> <span class="ow">or</span> <span class="n">update_all</span><span class="p">):</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>            <span class="sa">f</span><span class="s1">&#39;Attempt to update all rows of </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>            <span class="s1">&#39; without update_all being set to True!&#39;</span><span class="p">)</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>    <span class="n">_</span> <span class="o">=</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">args</span> <span class="o">!=</span> <span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_ho_check_colums</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>    <span class="n">update_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">update_args</span><span class="p">:</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>        <span class="k">return</span> <span class="kc">None</span> <span class="c1"># no new value update. Should we raise an error here?</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>    <span class="n">query_template</span> <span class="o">=</span> <span class="s2">&quot;update </span><span class="si">{}</span><span class="s2"> set </span><span class="si">{}</span><span class="s2"> </span><span class="si">{}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>    <span class="n">what</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__update_args</span><span class="p">(</span><span class="o">**</span><span class="n">update_args</span><span class="p">)</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>    <span class="n">where</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fkey_where</span><span class="p">(</span><span class="n">where</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>    <span class="n">query</span> <span class="o">=</span> <span class="n">query_template</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_qrn</span><span class="p">,</span> <span class="n">what</span><span class="p">,</span> <span class="n">where</span><span class="p">)</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>    <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_add_returning</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__execute</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="k">as</span> <span class="n">cursor</span><span class="p">:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">update_args</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_ho_fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>            <span class="k">return</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()]</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
<h3 id="half_orm.relation-functions">Functions<a href="#half_orm.relation-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="half_orm.relation.singleton" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">singleton</span><span class="p">(</span><span class="n">fct</span><span class="p">)</span></code>

<a href="#half_orm.relation.singleton" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Decorator. Enforces the relation to define a singleton.</p>
<p>_ho_is_singleton is set by Relation.get.
_ho_is_singleton is unset as soon as a Field is set.</p>


            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1028" name="__codelineno-0-1028"></a><span class="k">def</span><span class="w"> </span><span class="nf">singleton</span><span class="p">(</span><span class="n">fct</span><span class="p">):</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator. Enforces the relation to define a singleton.</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a><span class="sd">    _ho_is_singleton is set by Relation.get.</span>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a><span class="sd">    _ho_is_singleton is unset as soon as a Field is set.</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a>    <span class="nd">@wraps</span><span class="p">(</span><span class="n">fct</span><span class="p">)</span>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ho_is_singleton</span><span class="p">:</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>            <span class="k">return</span> <span class="n">fct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>            <span class="bp">self</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ho_get</span><span class="p">()</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>            <span class="k">return</span> <span class="n">fct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>        <span class="k">except</span> <span class="n">relation_errors</span><span class="o">.</span><span class="n">ExpectedOneError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>            <span class="k">raise</span> <span class="n">relation_errors</span><span class="o">.</span><span class="n">NotASingletonError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>    <span class="n">wrapper</span><span class="o">.</span><span class="n">__is_singleton</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>    <span class="n">wrapper</span><span class="o">.</span><span class="n">__orig_args</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfullargspec</span><span class="p">(</span><span class="n">fct</span><span class="p">)</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="half_orm.relation.transaction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">transaction</span><span class="p">(</span><span class="n">fct</span><span class="p">)</span></code>

<a href="#half_orm.relation.transaction" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Decorator. Enforces every SQL insert, update or delete operation called within a
Relation method to be executed in a transaction.</p>


<details class="usage" open>
  <summary>Usage</summary>
  <p>from relation import transaction
class Person(model.get_relation_class(actor.person)):
    [...]
    <a class="magiclink magiclink-github magiclink-mention" href="https://github.com/transaction" title="GitHub User: transaction">@transaction</a>
    def insert_many(self, **data):
        for d_pers in **data:
            self(**d_pers).ho_insert()
    [...]</p>
<p>Pers().insert_many([{...}, {...}])</p>
</details>

            <details class="quote">
              <summary>Source code in <code>half_orm/relation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1047">1047</a></span>
<span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1047" name="__codelineno-0-1047"></a><span class="k">def</span><span class="w"> </span><span class="nf">transaction</span><span class="p">(</span><span class="n">fct</span><span class="p">):</span>
<a id="__codelineno-0-1048" name="__codelineno-0-1048"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator. Enforces every SQL insert, update or delete operation called within a</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a><span class="sd">    Relation method to be executed in a transaction.</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a><span class="sd">    Usage:</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a><span class="sd">        from relation import transaction</span>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a><span class="sd">        class Person(model.get_relation_class(actor.person)):</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a><span class="sd">            [...]</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a><span class="sd">            @transaction</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a><span class="sd">            def insert_many(self, **data):</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a><span class="sd">                for d_pers in **data:</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a><span class="sd">                    self(**d_pers).ho_insert()</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a><span class="sd">            [...]</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a><span class="sd">        Pers().insert_many([{...}, {...}])</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a>        <span class="k">with</span> <span class="n">Transaction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ho_model</span><span class="p">):</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a>            <span class="k">return</span> <span class="n">fct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="July 2, 2025 14:17:46 UTC">July 2, 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="June 26, 2025 08:59:47 UTC">June 26, 2025</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/collorg/halfORM" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/half-orm/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.footer"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>